<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="http://garymm.org/feed.xml" rel="self" type="application/atom+xml" /><link href="http://garymm.org/" rel="alternate" type="text/html" /><updated>2024-08-18T13:51:55-07:00</updated><id>http://garymm.org/feed.xml</id><entry><title type="html">Kagi vs Google search: a personal evaluation</title><link href="http://garymm.org/blog/2024/08/17/kagigoogle/" rel="alternate" type="text/html" title="Kagi vs Google search: a personal evaluation" /><published>2024-08-17T00:00:00-07:00</published><updated>2024-08-17T00:00:00-07:00</updated><id>http://garymm.org/blog/2024/08/17/kagi-vs-google-search</id><content type="html" xml:base="http://garymm.org/blog/2024/08/17/kagigoogle/">&lt;p&gt;&lt;a href=&quot;https://kagi.com&quot;&gt;Kagi&lt;/a&gt; is a relatively new search engine. Unlike Google, it makes money through user subscriptions and shows no ads.
Despite having decreased my usage of web search since the release of ChatGPT, I still use it a lot, and would be willing to pay a few
bucks a month for a significantly better experience. To evaluate Kagi, I put 75 of my recent search queries into Kagi and Google and rated
which I preferred. The queries spanned various topics, heavily tilted towards software engineering and computer topics.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;After this experiment I’ve decided to pay for Kagi and set it as my default search engine on both my phone and laptop.&lt;/p&gt;

&lt;p&gt;Here’s a qualitative comparison and some thoughts:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;When Google shows ads on my phone, it really hurts the experience since it takes up the whole screen (often two screens of scrolling) and the ads are very very rarely relevant (with the exception of Google shopping results, which are sometimes relevant). On desktop the ads are a minor annoyance since I typically can still see the non-ad results without scrolling, and in general when I’m using my laptop I’m in less of a hurry. However maybe only 1/10 of my queries trigger non-Google-shopping ads. Probably because many of my queries are very specific and technical. As noted, Kagi doesn’t show any ads ever.&lt;/li&gt;
  &lt;li&gt;Google is better at extracting relevant information (either from web results or structured data like stock prices) and putting it at the top of the search results. For Kagi this information is usually in the pages that are at or near the top, but it takes an extra click to get it. E.g. a graph of a stock’s price.&lt;/li&gt;
  &lt;li&gt;Kagi shows more results from somewhat obscure, non-commercial sites and blogs. For some of my queries, these sites had excellent content that I would be very unlikely to find via Google.&lt;/li&gt;
  &lt;li&gt;Google has a lot of features that I don’t care about that you might (for example, live sports scores).&lt;/li&gt;
  &lt;li&gt;I didn’t thoroughly evaluate queries where I was trying to buy products online. Kagi doesn’t have a shopping search feature, and I expect I will probably continue to use Google shopping in addition to other sites to shop.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Having worked at Google on search and seen how much human ingenuity and money went into building it, it’s pretty shocking
that a &lt;a href=&quot;https://blog.kagi.com/what-is-next-for-kagi&quot;&gt;37 person&lt;/a&gt; (as of 2024-04) company can compete at all, but here we are!&lt;/p&gt;

&lt;h2 id=&quot;detailed-results&quot;&gt;Detailed results&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Tie: 47 / 75&lt;/li&gt;
  &lt;li&gt;Strongly prefer Google: 3 / 75&lt;/li&gt;
  &lt;li&gt;Strongly prefer Kagi: 4 / 75&lt;/li&gt;
  &lt;li&gt;Weakly prefer Google: 11 / 75&lt;/li&gt;
  &lt;li&gt;Weakly prefer Kagi: 10 / 75&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;google-big-wins&quot;&gt;Google big wins&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;“bryant controlbox google home”. &lt;a href=&quot;https://www.reddit.com/r/smarthome/comments/j32rkz/bryant_evolution_connex_connect_talking_to_other/&quot;&gt;This reddit post&lt;/a&gt; is the only satisfying result on either, and it’s in the first few results for Google but not for Kagi.&lt;/li&gt;
  &lt;li&gt;“piedmont california front setback requirements”. Google has an “AI Overview” with the answer (which appears to have been extracted from a PDF). Kagi’s top result doesn’t have the answer on the page, though it does link to the PDF that contains the answer. It would take at least a minute of careful reading of the page that Kagi returned to figure out which link to click to get the right PDF, and then loading and searching in the PDF might take another minute.&lt;/li&gt;
  &lt;li&gt;“intc stock”. Google has a nice interactive graph. Kagi has some data (like current price, 52 week range), but I like the interactive graph more.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;kagi-big-wins&quot;&gt;Kagi big wins&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;“lugg movers”. Google starts with several ads for other companies (competitors to Lugg I assume). On my phone, I needed to scroll down two full screens to get past the ads to the actual result I wanted. Kagi had no ads, and had the official Lugg page (which is what I wanted) at the top.&lt;/li&gt;
  &lt;li&gt;“josefk simt”. Kagi returned exactly what I wanted, which was &lt;a href=&quot;https://yosefk.com/blog/simd-simt-smt-parallelism-in-nvidia-gpus.html&quot;&gt;this page from “yosefk.com”&lt;/a&gt; even though I misspelled the domain name in the query. Google seems to have decided there were not enough relevant results for my whole query so it searched for just “josefk” and then noted next to each of the results that the result is “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Missing: simt&lt;/code&gt;”.&lt;/li&gt;
  &lt;li&gt;“how to value startup options”. On Desktop, Google starts with 4 ads which are totally irrelevant to what I wanted (though on my phone it didn’t show any ads). After that it had an AI summary which seemed reasonable and itself linked to some pretty good results. After that it had some decent web results. Kagi had no ads and had some of the same results as Google, but only Kagi had &lt;a href=&quot;https://www.benkuhn.net/optopt/&quot;&gt;this gem&lt;/a&gt; from Ben Kuhn near the top. Reading that lead to lots of other relevant links on that same site.&lt;/li&gt;
  &lt;li&gt;“union find algorithm”: Google’s top result is GeeksforGeeks, which has relevant info but is not presented particularly well and the page has a huge amount of annoying animated ads. Google’s second result is to a pretty useful Wikipedia article. Kagi links to Wikipedia first, and second to &lt;a href=&quot;https://labuladong.gitbook.io/algo-en/iv.-high-frequency-interview-problem/union-find-explanation&quot;&gt;this page&lt;/a&gt; which has no ads and has nice illustrations of the algorithm.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>garymm</name></author><category term="internet" /><category term="information" /><category term="computers" /><category term="search" /><summary type="html">Kagi is a relatively new search engine. Unlike Google, it makes money through user subscriptions and shows no ads. Despite having decreased my usage of web search since the release of ChatGPT, I still use it a lot, and would be willing to pay a few bucks a month for a significantly better experience. To evaluate Kagi, I put 75 of my recent search queries into Kagi and Google and rated which I preferred. The queries spanned various topics, heavily tilted towards software engineering and computer topics.</summary></entry><entry><title type="html">Attention, Memory, and Productive Knowledge Work</title><link href="http://garymm.org/blog/2024/06/09/attention-memory-productive-knowledge-work/" rel="alternate" type="text/html" title="Attention, Memory, and Productive Knowledge Work" /><published>2024-06-09T00:00:00-07:00</published><updated>2024-06-09T00:00:00-07:00</updated><id>http://garymm.org/blog/2024/06/09/attention-memory-and-productive-knowledge-work</id><content type="html" xml:base="http://garymm.org/blog/2024/06/09/attention-memory-productive-knowledge-work/">&lt;p&gt;Here I present some ideas for increasing the productivity of knowledge workers by structuring their workflows around attention and memory.
I wrote this for my own benefit, but I hope you find it useful too!&lt;/p&gt;

&lt;h2 id=&quot;workflow-matters&quot;&gt;Workflow matters&lt;/h2&gt;

&lt;p&gt;By “workflow” I mean loosely how execution tasks are scheduled and coordinated. By “execution tasks” I mean the activities which more-or-less-directly create value. For a software engineer, these tasks include programming and designing.&lt;/p&gt;

&lt;p&gt;Much of the most influential thinking about optimizing workflows to increase productivity comes from the automobile industry. The history of car manufacturing has several inspiring examples. In 1909, a Ford Model T Runabout sold for $27,977 (in 2024 USD). In 1925 (16 years later), it sold for $4,517 (also in 2024 USD)&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. The number of Model Ts you could buy per dollar increased by over 6x!&lt;/p&gt;

&lt;p&gt;Much of this increasing productivity was due to changes in the workflow. One major change was the introduction of the moving assembly line. Prior to the assembly line, cars were built through “the craft method”, in which teams of fifteen workers worked simultaneously on a single car”&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;, which makes me think of young children playing soccer. This was inefficient in many ways. People got in each others’ ways, and they had to spend time walking around the factory to go between cars. With a moving assembly line, parts came to the workers and each worker could complete their stage of production without having to walk, coordinate with others, move tools, etc.&lt;/p&gt;

&lt;h2 id=&quot;attention-and-memory-matter&quot;&gt;Attention and memory matter&lt;/h2&gt;

&lt;p&gt;In manufacturing, the main inputs wer materials, equipment and manual labor. In knowledge work, the main input is human minds. To increase productivity, we need to produce more output without increasing inputs. One way to do this is to optimize the workflow! One way to optimize the knowledge worker workflow is to understand some properties of attention and memory.&lt;/p&gt;

&lt;p&gt;“Working memory is a cognitive system with a limited capacity that can hold information temporarily.”&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; It is essential for reasoning and decision making, which are crucial in knowledge work. The set of mental objects you can mentally manipulate at one time is limited by the capacity of your working memory. After switching tasks, it takes time to build up working memory.&lt;sup id=&quot;fnref:4&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Long-term memory is the system that lets you restore previous working memories. “Forgetting” means something being lost from long-term memory. The “forgetting curve”&lt;sup id=&quot;fnref:5&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; is a stylized fact. The longer you go without retrieving a memory, the more likely you are to forget it.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2024-06-09-attention-memory-productive-knowledge-work-forgetting-curve-659-d8ed2f894.png&quot; alt=&quot;the forgetting curve&quot; srcset=&quot;/generated/2024-06-09-attention-memory-productive-knowledge-work-forgetting-curve-400-9b57bcb5c.webp 400w, /generated/2024-06-09-attention-memory-productive-knowledge-work-forgetting-curve-600-9b57bcb5c.webp 600w, /generated/2024-06-09-attention-memory-productive-knowledge-work-forgetting-curve-659-9b57bcb5c.webp 659w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This conceptualization of human memory is quite similar to how computers work: working memory is analogous to a computer’s volatile memory (e.g., registers), long-term memory is analogous to persistent storage (e.g., a flash drive), and forgetting is analogous to deleting a file.&lt;sup id=&quot;fnref:6&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:6&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;6&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;If it’s not obvious by now, workflow interacts with how our memories work. Every time one switches tasks, one must repopulate working memory before becoming productive. And extended periods between working on a task leads to forgetting. One must re-learn, which takes time.&lt;/p&gt;

&lt;h2 id=&quot;ways-our-workflow-makes-us-less-productive&quot;&gt;Ways our workflow makes us less productive&lt;/h2&gt;

&lt;p&gt;Yet many knowledge workers switch tasks very often. This has obviously been the case in many places I’ve worked, but there is some objective data to support this impression: A report from the summer of 2018 analyzed data from over fifty thousand active users of the RescueTime time tracking software. It found that the median time between checking communication apps like email and Slack was 6 minutes, and more than 2/3 of the users &lt;em&gt;never&lt;/em&gt; experienced an hour of uninterrupted time.&lt;sup id=&quot;fnref:7&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:7&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Besides this short-term switching between execution and collaboration, people often switch between tasks that they are executing. On several projects I worked on it was common to have work items that went unfinished for months, with sporadic bouts of work spaced weeks apart. Work done this way has many costs, but it definitely incurs costs of forgetting and re-learning.&lt;/p&gt;

&lt;h2 id=&quot;suggestions&quot;&gt;Suggestions&lt;/h2&gt;

&lt;p&gt;At a high level:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Minimize context switches so as to avoid cost of loading things into working memory.&lt;/li&gt;
  &lt;li&gt;Minimize time between sessions of work on a single task so as to avoid forgetting.&lt;/li&gt;
  &lt;li&gt;Remember that convenience ≠ productivity.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And now some specific ways to put these principles into practice.&lt;/p&gt;

&lt;h3 id=&quot;use-meetings-well&quot;&gt;Use meetings well&lt;/h3&gt;

&lt;p&gt;Instant messages, e-mail, and interactions on doc comments are all asynchronous. Each message involves a context switch. Meetings are synchronous, rapid, concentrated communication. My rule of thumb: after the third message in an E-Mail or IM conversation, it’s better to switch to a meeting. An illustration of the cost of context switches that can be avoided by a meeting:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2024-06-09-attention-memory-productive-knowledge-work-side-by-side-653-0d3f63e19.png&quot; alt=&quot;two alternative ways to schedule work&quot; srcset=&quot;/generated/2024-06-09-attention-memory-productive-knowledge-work-side-by-side-400-e692b153f.webp 400w, /generated/2024-06-09-attention-memory-productive-knowledge-work-side-by-side-600-e692b153f.webp 600w, /generated/2024-06-09-attention-memory-productive-knowledge-work-side-by-side-653-e692b153f.webp 653w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Meetings certainly have their own costs, and are often run poorly, but producing fewer context switches is a huge and underappreciated advantage of meetings over asynchronous communication.&lt;/p&gt;

&lt;h4 id=&quot;meeting-tips&quot;&gt;Meeting tips&lt;/h4&gt;

&lt;p&gt;Regularly scheduled meetings are useful for regular, non-urgent communication. Participants know they’ll be able to discuss things relatively soon, and therefore can avoid resorting to asynchronous communication. Between meetings, participants can collect agenda items in a document as they arise. This is an example of convenience ≠ productivity. If I think of something to ask my coworker, it’s more convenient for me to IM him. But, if it’s not urgent, it’s more productive for me to write it the agenda of our next regularly scheduled meeting.&lt;/p&gt;

&lt;p&gt;For group meetings, it can be efficient to have a structured way for participants to schedule smaller-group follow-up meetings. When I was a manager at Microsoft, my team’s regular sync meetings were 60 minutes, but the whole team was only expected to meet for at most 30 minutes, and the rest of the hour was used for smaller group follow-up meetings. This avoids a context switch between blocks of meetings and blocks of solo wrk. And it avoids asynchronous back-and-forth to schedule a follow-up meeting.&lt;/p&gt;

&lt;p&gt;Finally, there are many ways meetings can be inefficient, but if participants are vigilant and vocal, they can be improved (or cancelled! Not all meetings are worthwhile).&lt;/p&gt;

&lt;h3 id=&quot;schedule-asynchronous-communication&quot;&gt;Schedule asynchronous communication&lt;/h3&gt;

&lt;p&gt;By default, don’t leave your inbox open, don’t leave your IM app open, and don’t leave your phone notifications on. Check these things on a schedule that balances responsiveness to others with your own ability to focus. Personally I follow a loose schedule of checking things first thing in the morning, immediately before meetings, and once or twice during the afternoon, when I happen to feel blocked or need a mental break.&lt;/p&gt;

&lt;p&gt;I used to have a problem with getting distracted by my inbox every time I sent an email. To send email without checking your inbox, you can use &lt;a href=&quot;https://mail.google.com/mail/?fs=1&amp;amp;tf=cm&quot;&gt;this link for GMail&lt;/a&gt; or &lt;a href=&quot;https://outlook.office365.com/mail/0/deeplink/compose&quot;&gt;this one for Outlook&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;schedule-focused-work&quot;&gt;Schedule focused work&lt;/h3&gt;

&lt;p&gt;One technique for avoiding self-imposed distraction is called “&lt;a href=&quot;https://en.wikipedia.org/wiki/Pomodoro_Technique&quot;&gt;Pomodoro&lt;/a&gt;”, which basically consists of setting a timer, and taking a break when the timer goes off.&lt;/p&gt;

&lt;p&gt;To increase the odds of having large blocks of time to focus, schedule events on your calendar that prevent others from scheduling meetings. If you have the option to work in a place that is quiet and physically isolated, try to do that during your scheduled focus blocks.&lt;/p&gt;

&lt;h3 id=&quot;limit-the-number-of-in-progress-tasks&quot;&gt;Limit the number of in-progress tasks&lt;/h3&gt;

&lt;p&gt;Limiting the number of tasks that you have in-progress can help reduce the temptation to context switch (and flush your working memory) and it will reduce the odds that you forget important details about one incomplete task while you’re working on another. This is a key feature of &lt;a href=&quot;https://en.wikipedia.org/wiki/Kanban_(development)&quot;&gt;Kanban&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Scrum_(software_development)&quot;&gt;Scrum&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;use-tools-to-disseminate-commonly-needed-information&quot;&gt;Use tools to disseminate commonly needed information&lt;/h3&gt;

&lt;p&gt;Some information is so commonly needed that the questions should be anticipated and built into tools that are used as part of the regular workflow. For example “Who is working on this task?” Proper use of an issue tracker (e.g., GitHub Issues, Asana) can answer this without the back-and-forth of asynchronous communication or the time burden of a meeting. If you find there is some question like this that is repeatedly asked, but has fairly formulaic answers, check if there’s a tool that you can adopt that will disseminate that information more efficiently.&lt;/p&gt;

&lt;h3 id=&quot;speed-up-testing-and-reviews&quot;&gt;Speed up testing and reviews&lt;/h3&gt;

&lt;p&gt;This is somewhat specific to software development, but it probably has analogs in other professions.&lt;/p&gt;

&lt;p&gt;The “testing and reviews” part of the software workflow typically looks like:&lt;/p&gt;

&lt;p&gt;While not approved:&lt;/p&gt;

&lt;p&gt;    Author: rebase, (read / think, write, build, run) until ready.&lt;/p&gt;

&lt;p&gt;    Wait for automatic checks.&lt;/p&gt;

&lt;p&gt;    Reviewer: read / think, comment. Maybe approve.&lt;/p&gt;

&lt;p&gt;This leaves plenty of room for context switching and forgetting:&lt;/p&gt;

&lt;p&gt;While not approved:&lt;/p&gt;

&lt;p&gt;    Wait for author to start.  &lt;b&gt;Author and reviewer forget.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    Author: rebase, (read / think, write, build, run) until ready.  &lt;b&gt;Author context switch. Reviewer forgets.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    Wait for max(automatic checks, reviewer to start).  &lt;b&gt;Author and reviewer context switch + forget.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;    Reviewer: read / think, comment. Maybe approve.  &lt;b&gt;Reviewer context switch.  Author forgets.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;What can we do about this? If automatic checks are frequently the bottleneck, spend time speeding them up. If code reviews are the bottleneck, speed those up. On a previous team I set up a duty rotation to review any changes that did not yet have a reviewer. You might also experiment with pair programming, which basically combines code review and programming.&lt;/p&gt;

&lt;h2 id=&quot;acknowledgements-and-further-reading&quot;&gt;Acknowledgements and further reading&lt;/h2&gt;

&lt;p&gt;Besides my own experience, this post is based on the following:&lt;/p&gt;

&lt;p&gt;A World Without Email by Cal Newport.&lt;/p&gt;

&lt;p&gt;Deep Work by Cal Newport.&lt;/p&gt;

&lt;p&gt;Getting Things Done by David Allen.&lt;/p&gt;

&lt;p&gt;More Effective Agile by Steve McConnell.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;https://en.wikipedia.org/wiki/Ford_Model_T#Price_and_production &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;A world without email, page 97. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Working_memory&quot;&gt;https://en.wikipedia.org/wiki/Working_memory&lt;/a&gt; &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;https://en.wikipedia.org/wiki/Psychological_refractory_period &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:5&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;https://en.wikipedia.org/wiki/Forgetting_curve &lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:6&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;https://en.wikipedia.org/wiki/Memory_hierarchy &lt;a href=&quot;#fnref:6&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:7&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;A world without email, page 11 &lt;a href=&quot;#fnref:7&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>garymm</name></author><category term="work" /><category term="productivity" /><summary type="html">Here I present some ideas for increasing the productivity of knowledge workers by structuring their workflows around attention and memory. I wrote this for my own benefit, but I hope you find it useful too!</summary></entry><entry><title type="html">Why I considered IVF despite not having any fertility issues, and then decided against it</title><link href="http://garymm.org/blog/2024/03/10/why-i-considered-ivf/" rel="alternate" type="text/html" title="Why I considered IVF despite not having any fertility issues, and then decided against it" /><published>2024-03-10T00:00:00-08:00</published><updated>2024-03-10T00:00:00-08:00</updated><id>http://garymm.org/blog/2024/03/10/why-i-considered-ivf</id><content type="html" xml:base="http://garymm.org/blog/2024/03/10/why-i-considered-ivf/">&lt;p&gt;In &lt;a href=&quot;https://www.garymm.org/blog/2023/11/10/the-dangers-of-reproducing-while-old/&quot;&gt;The dangers of reproducing while old&lt;/a&gt;, I mentioned that pre-implantation genetic testing could be a way for older prospective parents to improve outcomes. This led my partner and I to seriously consider doing IVF despite not having any fertility issues. At a high level, my conclusion after writing that post was:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Older parents are at much higher risk of passing harmful genetic mutations to their embryos.&lt;/li&gt;
  &lt;li&gt;IVF gives people the opportunity to screen for these harmful mutations, potentially avoiding miscarriage or serious health conditions later on. It also provides an opportunity to use polygenic screening to select for desirable traits.&lt;/li&gt;
  &lt;li&gt;There’s not much evidence that IVF results in worse health outcomes for children.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;After investigating this more, I now think:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The benefit of polygenic screening is currently generally small, and in our case it would be tiny.&lt;/li&gt;
  &lt;li&gt;There’s some evidence of IVF producing worse health outcomes.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;polygenic-screening&quot;&gt;Polygenic screening&lt;/h2&gt;

&lt;p&gt;I think polygenic screening&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; has a lot of potential, but currently it has serious limitations, including:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The models for certain traits like intelligence just aren’t very good at predicting. This is called the “missing heritability” problem, and it’s quite controversial exactly what’s going on, but some of the issues are clear. One is that current models are based on data that measured other things, like educational attainment, which are correlated with intelligence, but not perfectly (&lt;a href=&quot;https://www.sciencedirect.com/science/article/abs/pii/S0160289606000171&quot;&gt;e.g. Deary et. al find 0.81&lt;/a&gt;). And it’s partly because some of the variance in traits we care about is probably caused by very rare variants which would require huge sample sizes to detect.&lt;/li&gt;
  &lt;li&gt;The models are much better for people of certain ancestry than others, because of the data that they were created with. My impression is that the models currently work best for people of northern European ancestry.&lt;/li&gt;
  &lt;li&gt;The expected variance amongst embryos from the same parents is pretty low. To have good odds of finding an embryo that has polygenic scores much better than the average of its genetic siblings (i.e. the other embryos parents will be choosing amongst&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;), one needs a lot of embryos to choose from.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Point 1 should decrease the appeal of polygenic screening for everyone. Point 2 decreased it for me because my children would be mostly not-northern European. As for the number of embryos, my partner took a test that suggested a round of egg retrieval would yield relatively few eggs. This meant she’d probably have to undergo multiple rounds of egg retrieval, which is expensive and unpleasant.&lt;/p&gt;

&lt;p&gt;It’s hard to find good information on this topic. It’s not hard to find people saying that the technology doesn’t work, but I get the distinct whiff of motivated reasoning from articles like &lt;a href=&quot;https://liorpachter.wordpress.com/2021/04/12/the-amoral-nonsense-of-orchids-embryo-selection/&quot;&gt;this one by Lior Pachter&lt;/a&gt;. Basically I think the author thinks polygenic screening is morally wrong or disgusting, and therefore he’s finding reasons to say it won’t work.&lt;/p&gt;

&lt;p&gt;I want polygenic screening to work. If we were doing IVF anyways, I would definitely have the embryos polygenically screened.&lt;/p&gt;

&lt;h2 id=&quot;ivf-health-outcomes&quot;&gt;IVF health outcomes&lt;/h2&gt;

&lt;p&gt;I found the excellent paper &lt;a href=&quot;https://academic.oup.com/humupd/article/25/2/137/5316072?login=false&quot;&gt;The health of children conceived by ART: ‘the chicken or the egg?’&lt;/a&gt;, which looks at studies that try to control for the systematic differences between people who pursue IVF and those who don’t. That review, and newer studies such as &lt;a href=&quot;https://pubmed.ncbi.nlm.nih.gov/35934120/&quot;&gt;Sutclifffe (2023&lt;/a&gt;) did not find large differences in IVF babies later in life. But the best-controlled studies &lt;em&gt;do&lt;/em&gt; find a pretty large increased risk of preterm birth (relative risk somewhere in 1.5 - 2). &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5791955/&quot;&gt;Elsewhere&lt;/a&gt; I found the absolute risk of preterm birth for a 36 year old mother is about 6%, so IVF might take that up to 9-12%. Since preterm birth is associated with a lot of bad health conditions, it would be surprising if IVF children are more likely to be born preterm but are equally healthy later on.&lt;/p&gt;

&lt;p&gt;I’m wondering how it’s possible to reconcile the preterm birth and generally good outcomes in adults. Some possibilities:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Preterm birth rates are not higher. The studies are just not controlling for something important.&lt;/li&gt;
  &lt;li&gt;Preterm birth caused by IVF is not associated with later bad health, but preterm birth caused by other things is.&lt;/li&gt;
  &lt;li&gt;There are negative impacts, but the studies of adults have missed them. Some possible reasons why: studies are too small, the negative health outcomes haven’t shown up yet because most IVF babies are too young, studies looked at the wrong metrics, there’s some selection bias such that the least healthy people are less likely to be studied (this one seems quite plausible to me).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My current guess is there’s a small but real tendency for people conceived via IVF to be less healthy later in life, though I’m extremely uncertain about the exact aspects of health, the magnitude and the frequency involved.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;If you are not familiar with polygenic screening, I recommend &lt;a href=&quot;https://www.lesswrong.com/posts/yT22RcWrxZcXyGjsA/how-to-have-polygenically-screened-children&quot;&gt;Gene Smith’s post&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Unless you’re using donor gametes. In which case you might use multiple donors and compare across non-siblings. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>garymm</name></author><category term="parenting" /><category term="biology" /><category term="health" /><summary type="html">In The dangers of reproducing while old, I mentioned that pre-implantation genetic testing could be a way for older prospective parents to improve outcomes. This led my partner and I to seriously consider doing IVF despite not having any fertility issues. At a high level, my conclusion after writing that post was:</summary></entry><entry><title type="html">The dangers of reproducing while old</title><link href="http://garymm.org/blog/2023/11/10/the-dangers-of-reproducing-while-old/" rel="alternate" type="text/html" title="The dangers of reproducing while old" /><published>2023-11-10T00:00:00-08:00</published><updated>2023-11-10T00:00:00-08:00</updated><id>http://garymm.org/blog/2023/11/10/the-dangers-of-reproducing-while-old</id><content type="html" xml:base="http://garymm.org/blog/2023/11/10/the-dangers-of-reproducing-while-old/">&lt;p&gt;I had my first child when I was 36 years old, which made me want to understand the risks of having children at different ages. Before looking into this, my impression was that the main biological problems with old-age parenthood had to do with not having the necessary health and vigor to care for young’uns, and I had heard that older women have trouble getting pregnant. While those are real issues, there are many others worthy of consideration.&lt;/p&gt;

&lt;p&gt;My read of the evidence is that the risks of miscarriage and serious health problems for children, including autism and birth defects, increase significantly with parental (both paternal and maternal) age. The data I could find for most risks is not very fine-grained and not very precise, but I think this qualitative description matches the data: Risks start rising at around 30 years old for both mothers and fathers, rises gradually through about 35 for mothers and 40 for fathers, and then sharply after that.&lt;/p&gt;

&lt;p&gt;Interestingly, the ages at which things start to go wrong are similar for fathers and mothers, but the mechanisms are different. Sperm cells are produced throughout a man’s life, and each time a new cell is produced, there is a chance of a genetic mutation. Sperm are produced by copying the DNA of other short-lived cells, which are themselves produced in the same way, so mutations accumulate. Women’s egg cells, however, are all present when a woman is born, but over time they accumulate damage.&lt;/p&gt;

&lt;p&gt;If this is correct, then there are two ways to reduce these risks: have kids when young, or use frozen gametes from your younger selves. If you’re already in the danger zone and don’t have frozen gametes, pre-implantation genetic testing may be able to screen out embryos that have certain genetic defects, and thus reduce the risk of some bad outcomes.&lt;/p&gt;

&lt;p&gt;My advice:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If you want to have kids at some later age, and that later age is &amp;gt;= 35 for a woman or &amp;gt;= 40 for a man, freeze your gametes ASAP.&lt;/li&gt;
  &lt;li&gt;If you’re already past those age thresholds and you have the means, consider in-vitro fertilization so you can take advantage of pre-implantation genetic testing.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In “the dangers” section below I summarize some evidence on how parental age interacts with various risks. What’s not obvious is the relationship between the different risks. That is, are they mostly independent of each other, or is a child born with e.g., a heart defect much more likely to be autistic? They are not independent. For example, &lt;a href=&quot;https://www.nature.com/articles/pr2006181&quot;&gt;Eide et al.&lt;/a&gt; find a significant correlation between birth defects and intellectual disability. So if you want to know “what are the odds my kid comes out totally healthy”, I think just looking at the highest risk and ignoring the others is reasonable.&lt;/p&gt;

&lt;p&gt;If you’re interested in the details supporting the above conclusions, read on.&lt;/p&gt;

&lt;h2 id=&quot;technical-jargon&quot;&gt;Technical jargon&lt;/h2&gt;

&lt;p&gt;Skip this if you know these terms.&lt;/p&gt;

&lt;h3 id=&quot;prevalence&quot;&gt;Prevalence&lt;/h3&gt;

&lt;p&gt;The prevalence is what fraction of the population has the outcome of interest. Basically:&lt;/p&gt;

&lt;p&gt;(number of people with the outcome) / (number of people that were studied).&lt;/p&gt;

&lt;h3 id=&quot;odds-ratio&quot;&gt;Odds ratio&lt;/h3&gt;

&lt;p&gt;An odds ratio is a ratio of how likely the outcome of interest is in the condition of interest, to how likely it is in some reference condition. For the data below, the condition is always a particular parental age range, and the reference condition is some other age range that the researchers chose. For example, say we set the reference age to 25, and our outcome of interest is being born with green hair. If a study finds that children of fathers aged 30 have 1/10 odds of being born with green hair, and the children of fathers aged 25 have 1/100 odds of being born with green hair, then the odds ratio for age 30 is 1/10 / 1 / 100 = 10.&lt;/p&gt;

&lt;h3 id=&quot;95-ci&quot;&gt;95% CI&lt;/h3&gt;

&lt;p&gt;A 95% CI (confidence interval) is a range of values. Under certain assumptions&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; there is a 95% chance that the true value falls within that range.&lt;/p&gt;

&lt;h2 id=&quot;pre-implantation-genetic-testing&quot;&gt;Pre-implantation genetic testing&lt;/h2&gt;

&lt;p&gt;Pre-implantation genetic testing is done on embryos that have been fertilized in-vitro before implanting them into a woman (more details &lt;a href=&quot;https://www.lesswrong.com/posts/yT22RcWrxZcXyGjsA/how-to-have-polygenically-screened-children#But_how_do_they_even_get_an_embryo_s_DNA_&quot;&gt;here&lt;/a&gt;). After developing for about 10 days, embryos have enough cells that some can be removed for genetic testing. &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9674466/&quot;&gt;Sordia-Hernandez et al.&lt;/a&gt; look at the effects of testing for aneuploidy, which is a specific kind of genetic defect which often results in miscarriage or abortion. It finds significant benefits for women &amp;gt;= 35 years old, but not for younger women.&lt;/p&gt;

&lt;p&gt;Note that for almost everything else, the outcome being tested for is bad, whereas here it is live birth rate, or the odds of a child being born alive after an embryo is transferred into a woman.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Mother’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Live birth rate odds ratio 95% CI (relative to no genetic testing)&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt; 35
   &lt;/td&gt;
   &lt;td&gt;0.56, 1.34
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 35
   &lt;/td&gt;
   &lt;td&gt;1.07, 2.84
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Very recently, some companies have started offering more in-depth genetic screening for embryos, such as assessing risk for polygenic traits, meaning influenced by many genes. The companies offering this service claim all sorts of benefits, such as reducing the risk of cancer and diabetes, but I don’t think it’s been independently evaluated, and it’s probably too new to truly evaluate, since there’s a very small number of people alive who were screened in this way. &lt;a href=&quot;https://www.lesswrong.com/posts/yT22RcWrxZcXyGjsA/how-to-have-polygenically-screened-children&quot;&gt;Here’s Gene Smith’s post&lt;/a&gt; that’s very enthusiastic about such screening and tells you how to go about it, and &lt;a href=&quot;https://www.lesswrong.com/posts/yT22RcWrxZcXyGjsA/how-to-have-polygenically-screened-children?commentId=uiFXXRpdXCzXjmfj8&quot;&gt;my response trying to summarize a skeptical position&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So if you’re older and you don’t have frozen gametes, should you do IVF just so you can do pre-implantation genetic testing?&lt;/p&gt;

&lt;p&gt;Pros:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Very effective at detecting aneuploidy, and thus increasing live birth rate per pregnancy.&lt;/li&gt;
  &lt;li&gt;You can choose the child’s sex.&lt;/li&gt;
  &lt;li&gt;If you opt for polygenic screening, it is possible to reduce other health risks and possibly improve other desirable traits like IQ. Again, see &lt;a href=&quot;https://www.lesswrong.com/posts/yT22RcWrxZcXyGjsA/how-to-have-polygenically-screened-children&quot;&gt;Gene Smith’s post&lt;/a&gt; for more details on this.&lt;/li&gt;
  &lt;li&gt;I haven’t seen any strong evidence that IVF results in worse health outcomes. Note there are many studies that show worse outcomes for IVF, but since IVF is largely used by people who have fertility problems, and differences seem to disappear entirely when controlling for this. &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3650450/&quot;&gt;More here&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Cons:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Expensive in time and money (maybe $25,000 in 2023).&lt;/li&gt;
  &lt;li&gt;Will be more expensive and / or less effective for women who produce fewer eggs per retrieval, which is mostly older women.&lt;/li&gt;
  &lt;li&gt;There is &lt;a href=&quot;https://academic.oup.com/humupd/article/25/2/137/5316072?login=false&quot;&gt;some evidence&lt;/a&gt; that IVF results in differences in the embryo that might possibly result in less healthy people (vs old-fashioned conception). I think the odds that this results in worse outcomes are quite low, but it’s worth mentioning.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;the-dangers&quot;&gt;The dangers&lt;/h2&gt;

&lt;h3 id=&quot;miscarriage&quot;&gt;Miscarriage&lt;/h3&gt;

&lt;p&gt;This chart from &lt;a href=&quot;https://www.bmj.com/content/364/bmj.l869&quot;&gt;Magnus et al.&lt;/a&gt; shows the absolute risk by mother’s age. Y-axis is the proportion of pregnancies that end in miscarriage:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-11-10-the-dangers-of-reproducing-while-old/maternal-miscarriage-780-b27867d53.jpg&quot; alt=&quot;absolute risk of miscarriage by maternal age&quot; srcset=&quot;/generated/2023-11-10-the-dangers-of-reproducing-while-old/maternal-miscarriage-400-902027773.webp 400w, /generated/2023-11-10-the-dangers-of-reproducing-while-old/maternal-miscarriage-600-902027773.webp 600w, /generated/2023-11-10-the-dangers-of-reproducing-while-old/maternal-miscarriage-780-902027773.webp 780w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And here’s some data from &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7456349/&quot;&gt;du Fossé et al.&lt;/a&gt; on the risk by father’s age. For the absolute risk, I assumed the absolute risk for the reference age is 10%, which seems to be about the value for a 27 year old woman from the chart above.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Absolute risk 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
   &lt;td&gt;10%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;30-34
   &lt;/td&gt;
   &lt;td&gt;0.9, 1.21
   &lt;/td&gt;
   &lt;td&gt;9%, 12.1%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;35-39
   &lt;/td&gt;
   &lt;td&gt;0.92, 1.43
   &lt;/td&gt;
   &lt;td&gt;9.2%, 14.3%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;40-44
   &lt;/td&gt;
   &lt;td&gt;1.06, 1.43
   &lt;/td&gt;
   &lt;td&gt;10.6%, 14.3%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 45
   &lt;/td&gt;
   &lt;td&gt;1.13, 1.81
   &lt;/td&gt;
   &lt;td&gt;11.3%, 18.1%
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;h3 id=&quot;autism&quot;&gt;Autism&lt;/h3&gt;

&lt;h4 id=&quot;prevalence-1&quot;&gt;Prevalence&lt;/h4&gt;

&lt;p&gt;People with a huge range of abilities and tendencies are all diagnosed with autism, and there’s a lot of debate about the accuracy of many diagnoses. However “profound autism” is a diagnosis with much clearer criteria. &lt;a href=&quot;https://www.researchgate.net/publication/370128310_The_Prevalence_and_Characteristics_of_Children_With_Profound_Autism_15_Sites_United_States_2000-2016&quot;&gt;Hughes et al.&lt;/a&gt; defined profound autism “as children with autism who were either nonverbal or minimally verbal or had an (intelligence quotient) IQ &amp;lt;50”. That study estimated the prevalence of profound autism in the USA as:&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;Female
   &lt;/td&gt;
   &lt;td&gt;1.88 / 1000 = 1 / 532
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;Male
   &lt;/td&gt;
   &lt;td&gt;7.18 / 1000 = 1 / 139
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;Overall
   &lt;/td&gt;
   &lt;td&gt;4.59 / 1000 = 1 / 218
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;These numbers seem shockingly high, but they do somewhat match my casual observations. I don’t know a lot of children, but I know of at least 2 profoundly autistic boys.&lt;/p&gt;

&lt;h4 id=&quot;risk-by-parental-age&quot;&gt;Risk by parental age&lt;/h4&gt;

&lt;p&gt;The studies I found on the impact of parental age did not restrict themselves to just profound autism, so it’s possible that parental age interacts with profound autism differently, but my guess is it’s at least qualitatively correct.&lt;/p&gt;

&lt;p&gt;Here are the results from &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2638544/&quot;&gt;Durkin et al.&lt;/a&gt;, who looked at both the father’s and mother’s ages. For the absolute risk for fathers, I used the number of autism spectrum disorder cases / size of the “Birth Chort Comparison Group” for the father’s or mother’s reference age, extracted from table 3 of the paper. For fathers that’s 322 / 67,080 = 0.48%. For mother’s that’s 366 / 75,053 = 0.49%. These numbers are close to the overall risk of profound autism from Hughes et al. above, but this study considered any autism diagnosis, so something is probably wrong either with my calculation or with one or both of these studies.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Absolute risk 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;0.4, 1.0
   &lt;/td&gt;
   &lt;td&gt;0.19%, 0.48%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;20-24
   &lt;/td&gt;
   &lt;td&gt;0.7, 1.1
   &lt;/td&gt;
   &lt;td&gt;0.34%, 0.53%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;Reference
   &lt;/td&gt;
   &lt;td&gt;0.48%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;30-34
   &lt;/td&gt;
   &lt;td&gt;0.9, 1.2
   &lt;/td&gt;
   &lt;td&gt;0.43%, 0.58%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;35-39
   &lt;/td&gt;
   &lt;td&gt;0.9, 1.3
   &lt;/td&gt;
   &lt;td&gt;0.43%, 0.62%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 40
   &lt;/td&gt;
   &lt;td&gt;1.1, 1.8
   &lt;/td&gt;
   &lt;td&gt;0.53%, 0.86%
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Mother’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Absolute risk 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;0.5, 1.0
   &lt;/td&gt;
   &lt;td&gt;0.25%, 0.49%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;20-24
   &lt;/td&gt;
   &lt;td&gt;0.8, 1.1
   &lt;/td&gt;
   &lt;td&gt;0.39%, 0.54%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;Reference
   &lt;/td&gt;
   &lt;td&gt;0.49%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;30-34
   &lt;/td&gt;
   &lt;td&gt;0.9, 1.3
   &lt;/td&gt;
   &lt;td&gt;0.44%, 0.64%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 35
   &lt;/td&gt;
   &lt;td&gt;1.1, 1.6
   &lt;/td&gt;
   &lt;td&gt;0.54%, 0.64%
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;Note from paper: “Because the increased risk was similar for ages 35–39 and ≥40 years, the high-risk maternal age category was defined as ≥35 years.”&lt;/p&gt;

&lt;p&gt;And here are results from &lt;a href=&quot;https://doi.org/10.1038/mp.2010.121&quot;&gt;another study&lt;/a&gt; that looked only at the father’s age:&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;15-29
   &lt;/td&gt;
   &lt;td&gt;Reference
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;30-39
   &lt;/td&gt;
   &lt;td&gt;1.0, 1.42
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;40-49
   &lt;/td&gt;
   &lt;td&gt;1.07, 1.87
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 50
   &lt;/td&gt;
   &lt;td&gt;1.26, 3.88
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;This chart shows absolute risks from that same study:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-11-10-the-dangers-of-reproducing-while-old/paternal-autism-571-ad78da241.png&quot; alt=&quot;absolute risk of autism by paternal age&quot; srcset=&quot;/generated/2023-11-10-the-dangers-of-reproducing-while-old/paternal-autism-400-5c21b43d3.webp 400w, /generated/2023-11-10-the-dangers-of-reproducing-while-old/paternal-autism-571-5c21b43d3.webp 571w&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;chromosome-disorders&quot;&gt;Chromosome disorders&lt;/h3&gt;

&lt;h4 id=&quot;prevalence-2&quot;&gt;Prevalence&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://pubmed.ncbi.nlm.nih.gov/9934980/&quot;&gt;Caron, Tihy, and Dallaire&lt;/a&gt; find that of mothers aged &amp;gt;= 35,  1.79% or 1 / 55 have a chromosomal disorder in the second trimester. Note that some chromosome disorders result in miscarriage earlier than that, so the true prevalence is certainly higher.&lt;/p&gt;

&lt;h4 id=&quot;risk-by-parental-age-1&quot;&gt;Risk by parental age&lt;/h4&gt;

&lt;p&gt;To compute absolute risk, I took the prevalence number from above and then divided it by 5.66 (the middle of the odds ratio CI for mothers aged &amp;gt;= 35) to get 1.79 % / 5.66 = 0.32%.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Absolute risk 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;1.01, 1.89
   &lt;/td&gt;
   &lt;td&gt;0.32%, 0.60%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
   &lt;td&gt;0.32%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 40
   &lt;/td&gt;
   &lt;td&gt;1.12, 1.52
   &lt;/td&gt;
   &lt;td&gt;0.36%, 0.49%
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7803514/&quot;&gt;Fang et al.&lt;/a&gt;&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Mother’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Absolute risk 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;0.54, 0.88
   &lt;/td&gt;
   &lt;td&gt;0.17%,	0.28%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;20-34
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
   &lt;td&gt;0.32%
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 35
   &lt;/td&gt;
   &lt;td&gt;5.13, 6.2
   &lt;/td&gt;
   &lt;td&gt;1.64%,	1.98%
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://obgyn.onlinelibrary.wiley.com/doi/10.1111/aogs.14339&quot;&gt;Ahn et al.&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;urogenital-defects&quot;&gt;Urogenital defects&lt;/h3&gt;

&lt;h4 id=&quot;prevalence-3&quot;&gt;Prevalence&lt;/h4&gt;

&lt;p&gt;1.60 / 1000 = 1 / 625. &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6472003/&quot;&gt;Source&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&quot;risk-by-parental-age-2&quot;&gt;Risk by parental age&lt;/h4&gt;

&lt;p&gt;I didn’t find an easy way to calculate absolute risk.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;1.03, 2.19
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 40
   &lt;/td&gt;
   &lt;td&gt;1.07, 1.52
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7803514/&quot;&gt;Fang et al.&lt;/a&gt;&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Mother’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;20-34
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 35
   &lt;/td&gt;
   &lt;td&gt;1.13, 1.89
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://obgyn.onlinelibrary.wiley.com/doi/10.1111/aogs.14339&quot;&gt;Ahn et al.&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;heart-defects&quot;&gt;Heart defects&lt;/h3&gt;

&lt;h4 id=&quot;prevalence-4&quot;&gt;Prevalence&lt;/h4&gt;

&lt;p&gt;137.1 / 10,000 = 1 / 73. &lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S0002870314004980&quot;&gt;Source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Note: this seems really high to me. Maybe most of these are not very serious, or maybe I know people who were born with heart defects but I don’t know they have them.&lt;/p&gt;

&lt;h4 id=&quot;risk-by-parental-age-3&quot;&gt;Risk by parental age&lt;/h4&gt;

&lt;p&gt;I didn’t find an easy way to calculate absolute risk.&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Father’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;0.96, 1.16
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;25-29
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 40
   &lt;/td&gt;
   &lt;td&gt;1.01, 1.2
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7803514/&quot;&gt;Fang et al.&lt;/a&gt;&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
  &lt;tr&gt;
   &lt;td&gt;&lt;strong&gt;Mother’s age&lt;/strong&gt;
   &lt;/td&gt;
   &lt;td&gt;&lt;strong&gt;Odds ratio 95% CI&lt;/strong&gt;
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;lt;20
   &lt;/td&gt;
   &lt;td&gt;0.79, 1.1
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;20-34
   &lt;/td&gt;
   &lt;td&gt;reference
   &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td&gt;&amp;gt;= 35
   &lt;/td&gt;
   &lt;td&gt;1.06, 1.24
   &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;From &lt;a href=&quot;https://obgyn.onlinelibrary.wiley.com/doi/10.1111/aogs.14339&quot;&gt;Ahn et al.&lt;/a&gt;&lt;/p&gt;

&lt;!-- Footnotes themselves at the bottom. --&gt;
&lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;

      &lt;p&gt;Which scientists sometimes violate and thus invalidate their own results, but for now I’m just assuming these stats are sound. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>garymm</name></author><category term="parenting" /><category term="biology" /><category term="health" /><summary type="html">I had my first child when I was 36 years old, which made me want to understand the risks of having children at different ages. Before looking into this, my impression was that the main biological problems with old-age parenthood had to do with not having the necessary health and vigor to care for young’uns, and I had heard that older women have trouble getting pregnant. While those are real issues, there are many others worthy of consideration.</summary></entry><entry><title type="html">Multi-language integration testing made easy with Bazel</title><link href="http://garymm.org/blog/2023/10/09/multi-language-integration-testing-made-easy-with-bazel/" rel="alternate" type="text/html" title="Multi-language integration testing made easy with Bazel" /><published>2023-10-09T00:00:00-07:00</published><updated>2023-10-09T00:00:00-07:00</updated><id>http://garymm.org/blog/2023/10/09/multi-language-integration-testing-made-easy-with-bazel</id><content type="html" xml:base="http://garymm.org/blog/2023/10/09/multi-language-integration-testing-made-easy-with-bazel/">&lt;p&gt;When developing mlflow-go, a Go client for MLFlow, I realized integration testing was crucial to ensure correctness. Since the official MLFlow server and client are written in Python, such an integration test would involve multiple languages. Bazel made it easy to set up and automate a multi-language test.&lt;/p&gt;

&lt;p&gt;Bazel is a build tool and test runner. There’s lots to love about Bazel, but in this case the useful things are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;It supports many programming languages.&lt;/li&gt;
  &lt;li&gt;Its “data” and “runfiles” features enable one Bazel target to access other build outputs at run-time.&lt;/li&gt;
  &lt;li&gt;It can automatically download all needed language compilers / runtimes and external dependencies.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To understand why I wanted an integration test, I need to explain a little about the system under test. The client logs to and reads from a local file system. In a unit test, I can assert that the client is able to write and read back what it wrote, but I can’t assert that the files are in a format that the official MLFlow code will understand, since there is no specification of the file format. The fact that I can read my own handwriting is pretty useless if I’m writing you a letter and you can’t read it. A test that uses both the Go and Python client libraries can enforce compatibility.&lt;/p&gt;

&lt;p&gt;Here’s pseudo-code&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; for the test I ended up writing:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for client_binary in (go, py):
  temp_dir := make_temp_dir()
  run client binary in a subprocess, pointing it to write to temp_dir
  use official MLFlow client library to read from temp_dir
  assert we read what we expect to read
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test is declared in a BUILD.bazel file&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. Let’s walk through what’s in it. First we declare the binaries that write to MLFlow, using the Go and Python client libraries:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# go binary that uses our go client
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;go_binary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;go&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;main.go&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;deps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//:mlflow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# python binary that uses the official client
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py_binary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;main.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;main.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;deps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@pip//mlflow:pkg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then we declare the test, which depends on the above binaries as data:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;py_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;conformance_test&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;conformance_test.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;:go&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;:py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;deps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;@pip//mlflow:pkg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;@rules_python//python/runfiles&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt; field in the conformance_test target means bazel will build those targets when it builds the test, and the test can access them at run-time. To access them, we use Bazel’s runfiles module. In my conformance_test, to access the “py” target I would write:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;python.runfiles.runfiles&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# converts relative path to absolute path
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binary_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runfiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runfiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Rlocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conformance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately the documentation for runfiles in Bazel is currently pretty bad (as it is for many topics), but the basic workflow is:
Add the target for what you want to access at runtime (which can be a built binary, in this case our “py” and “go” targets) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt; field of the accessor’s target declaration (in this case the “conformance_test”).
In the accessor’s code (in this case conformance_test.py), use a Bazel runfiles library to access the file.&lt;/p&gt;

&lt;p&gt;Typically the “rules_&amp;lt;lang&amp;gt;” module that provides Bazel support for a given language includes a library to access runfiles. The one I used in my python test is “@rules_python//python/runfiles”.&lt;/p&gt;

&lt;p&gt;Above I mentioned Bazel’s dependency management. In this case, the only thing a user needs to install is bazel. Then when the user runs &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bazel test //conformance:conformance_test&lt;/code&gt;, bazel will:
Download a specific version of the Go toolchain (compiler and linker)
Download a specific version of the Python interpreter
Download all external Go and Python dependencies
Use the above to build the needed targets
Runs the test&lt;/p&gt;

&lt;p&gt;And this works on Linux, macOS, and Windows.&lt;/p&gt;

&lt;p&gt;There you have it. Let me know if you find this useful.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/Astera-org/mlflow-go/blob/master/conformance/conformance_test.py&quot;&gt;Latest full source&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Slightly modified from the real thing for clarity, &lt;a href=&quot;https://github.com/Astera-org/mlflow-go/blob/master/conformance/BUILD.bazel&quot;&gt;latest full source here&lt;/a&gt;. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>garymm</name></author><category term="programming" /><category term="bazel" /><summary type="html">When developing mlflow-go, a Go client for MLFlow, I realized integration testing was crucial to ensure correctness. Since the official MLFlow server and client are written in Python, such an integration test would involve multiple languages. Bazel made it easy to set up and automate a multi-language test.</summary></entry><entry><title type="html">Visiting Mexico can be safe and sublime</title><link href="http://garymm.org/blog/2023/03/17/visiting-mexico/" rel="alternate" type="text/html" title="Visiting Mexico can be safe and sublime" /><published>2023-03-17T00:00:00-07:00</published><updated>2023-03-17T00:00:00-07:00</updated><id>http://garymm.org/blog/2023/03/17/visiting-mexico</id><content type="html" xml:base="http://garymm.org/blog/2023/03/17/visiting-mexico/">&lt;p&gt;Mexico is an amazing place to visit, but a lot of people I know have never been, or haven’t been in a long time, despite enjoying international travel. In this post I’ll explain why I think you should consider visiting and address some common reasons people don’t go, including safety. This is not a travel guide, but I’ll provide a few recommendations for where to go and a few tips for how to do it.&lt;/p&gt;

&lt;p&gt;If you’re the type of person who goes for celebrity endorsements:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;div class=&quot;jekyll-twitter-plugin&quot;&gt;&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Each time in Mexico, no matter how short the visit, shows it was worth the trip in the first two hours of being there.&lt;/p&gt;&amp;mdash; tylercowen (@tylercowen) &lt;a href=&quot;https://twitter.com/tylercowen/status/799655526384615424?ref_src=twsrc%5Etfw&quot;&gt;November 18, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;the-good-stuff&quot;&gt;The good stuff&lt;/h2&gt;

&lt;h3 id=&quot;for-people-coming-from-the-usa&quot;&gt;For people coming from the USA&lt;/h3&gt;

&lt;p&gt;It’s close! There are lots of flights, and they’re not too long. E.g., flying from San Francisco to Mexico City takes 4.5 hours. And the time zones are similar, meaning less jet lag, and it’s easy to work remotely.&lt;/p&gt;

&lt;h3 id=&quot;for-everyone&quot;&gt;For everyone&lt;/h3&gt;

&lt;h4 id=&quot;relatively-affordable&quot;&gt;Relatively affordable&lt;/h4&gt;

&lt;p&gt;The &lt;a href=&quot;https://businessblog.trivago.com/trivago-hotel-price-index/&quot;&gt;Trivago Hotel Price Index&lt;/a&gt; says the average hotel room in Mexico City in 2023-03 is $110 ($249 in San Francisco, $258 in Paris). A seven-course tasting menu with drinks at the amazing &lt;a href=&quot;https://www.nytimes.com/2017/01/27/travel/criollo-oaxaca-elrique-olvera-restaurant-review.html&quot;&gt;Criollo&lt;/a&gt; in Oaxaca costs less than $50.&lt;/p&gt;

&lt;h4 id=&quot;loads-of-history&quot;&gt;Loads of history&lt;/h4&gt;

&lt;p&gt;Many parts of Mexico feel storied in the same way places in Europe or Asia do, but that’s relatively rare in other parts of the Americas. You can climb on the ruins of cities that were at their peak hundreds of years before the Spanish conquest, and engage with a culture that is descended from the ones that built those cities.&lt;/p&gt;

&lt;h4 id=&quot;great-food&quot;&gt;Great food&lt;/h4&gt;

&lt;p&gt;I’ve had several friends move from California to Europe and cite Mexican food as the main thing they miss. And the Mexican food in California is not nearly as good as the food in Mexico! You can eat extremely well on the street, in a market stall, or in fancy restaurants associated with internationally renowned chefs. If you want to cook for yourself, there is fresh and cheap produce available at open-air markets, supermarkets, or even Wal-Mart.&lt;/p&gt;

&lt;h4 id=&quot;warm-weather&quot;&gt;Warm weather&lt;/h4&gt;

&lt;p&gt;I love going to Mexico during the winter. It’s a big country with a varied climate, but hardly any place is actually cold during the winter. The average high temp in Mexico City is 22°C / 71°F in January and 25°C / 77°F in June. Many coastal areas are warm enough that swimming is extremely pleasant year-round.&lt;/p&gt;

&lt;h4 id=&quot;friendly-people&quot;&gt;Friendly people&lt;/h4&gt;

&lt;p&gt;Mexicans are very open and welcoming to foreigners. A &lt;a href=&quot;https://www.internations.org/expat-insider/2022/best-and-worst-places-for-expats-40242&quot;&gt;survey of expats by InterNations&lt;/a&gt; found Mexico “comes first in the Local Friendliness, Finding Friends, and Culture &amp;amp; Welcome Subcategories. Expats describe the local residents as friendly (90% vs. 66% globally) and find it easy to make friends among them (75% vs. 42% globally).”&lt;/p&gt;

&lt;h2 id=&quot;the-bad-stuff-is-not-too-bad&quot;&gt;The bad stuff (is not too bad)&lt;/h2&gt;

&lt;p&gt;There are some aspects of Mexico that are not ideal, but there are ways to mitigate those issues. For me, the major ones are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Safety&lt;/li&gt;
  &lt;li&gt;Air Pollution&lt;/li&gt;
  &lt;li&gt;Weather&lt;/li&gt;
  &lt;li&gt;Language&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;safety-avoid-the-violent-places-and-wear-a-seat-belt&quot;&gt;Safety: avoid the violent places and wear a seat-belt&lt;/h3&gt;

&lt;p&gt;Violent crime is very bad in some parts of Mexico, but it’s easy to avoid those parts. Road accidents get less press but I think are actually a larger danger for most tourists. Here are some tips for staying safe from both.&lt;/p&gt;

&lt;h4 id=&quot;road-accidents&quot;&gt;Road accidents&lt;/h4&gt;

&lt;p&gt;My nearest brush with death in Mexico came as I was driving on a freeway at night when a herd of cattle emerged from the desert onto the road in front of me without warning. Luckily I was driving slowly enough to stop with plenty of time.&lt;/p&gt;

&lt;p&gt;You can do the following to reduce your risk:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If you have a choice between a free (“libre”) and a toll (“cuota”) road, pay the toll. The road will be much better maintained and your journey will take less time.&lt;/li&gt;
  &lt;li&gt;Minimize time spent on the road at night, especially in poorly lit (rural) areas.&lt;/li&gt;
  &lt;li&gt;Minimize time spent in &lt;a href=&quot;https://mexicorelocationguide.com/colectivo/&quot;&gt;colectivos&lt;/a&gt; (vans that operate as public transit). They’re fun and cheap, but rarely do riders get to wear seat belts.&lt;/li&gt;
  &lt;li&gt;Often the seat belt buckles will be stuffed underneath the seat cushions. Take the time to pull them out and fasten yourself in.&lt;/li&gt;
  &lt;li&gt;Tell your driver (via a translation app if necessary) to slow down if they’re driving too fast.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The &lt;a href=&quot;#road-accidents-data&quot;&gt;appendix&lt;/a&gt; has some data on road accidents.&lt;/p&gt;

&lt;h4 id=&quot;violent-crime&quot;&gt;Violent crime&lt;/h4&gt;

&lt;p&gt;Violent crime is much worse in Mexico than in many other places. However, it is very unevenly distributed, and there are locations that should be safe enough for all but the paranoid.&lt;/p&gt;

&lt;p&gt;I suggest you look at the homicide rates for any place you’re considering visiting.
I suggest looking at homicide rates because homicide likely has the most accurate official statistics of any crime (one reason is that deaths are frequently tabulated by different agencies (e.g., the coroner) than the ones responsible for crime statistics, so there are multiple independent data sources), and it probably correlates strongly with other violence.&lt;/p&gt;

&lt;p&gt;Here’s a map from &lt;a href=&quot;https://elcri.men/en/cluster-map/&quot;&gt;El Crimen&lt;/a&gt;, where brighter means more homicide:
&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/homicide-cluster-map-800-7739fe512.png&quot; alt=&quot;homicide cluster map&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/homicide-cluster-map-400-0145fb608.webp 400w, /generated/2023-03-17-visiting-mexico/homicide-cluster-map-600-0145fb608.webp 600w, /generated/2023-03-17-visiting-mexico/homicide-cluster-map-800-0145fb608.webp 800w, /generated/2023-03-17-visiting-mexico/homicide-cluster-map-1000-0145fb608.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;One of the brightest spots is Guaymas, Sonora, which has a homicide rate of 115 / 100k population.
That’s way more murdery than I would be comfortable with, but just avoid the bright spots and you’ll probably be fine!&lt;/p&gt;

&lt;p&gt;Here are some homicide rates in a few cities in Mexico that I recommend in green, compared with some cities in the USA and France you might be familiar with:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2020-800-7d1c3075c.png&quot; alt=&quot;homicide rates in different cities (2020)&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2020-400-a8f5ab7b7.webp 400w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-600-a8f5ab7b7.webp 600w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-800-a8f5ab7b7.webp 800w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-1000-a8f5ab7b7.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We can see the city with the highest homicide rate that I’ve recommended is Oaxaca, which has a rate significantly less than Washington DC. In both Washington DC and Oaxaca I think the places a tourist is likely to visit are very safe.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;#crime-data&quot;&gt;appendix&lt;/a&gt; has details on the data sources and some more data.&lt;/p&gt;

&lt;h3 id=&quot;air-pollution&quot;&gt;Air Pollution&lt;/h3&gt;

&lt;p&gt;Air pollution in Mexico City is bad enough that it would deter me from living there long term. However, most places in Mexico have much cleaner air than Mexico City, and even there the air is clean enough that I’m entirely comfortable visiting.&lt;/p&gt;

&lt;p&gt;You can use &lt;a href=&quot;https://www.iqair.com/&quot;&gt;IQAir&lt;/a&gt; to check air quality before your trip. For any particular station, scroll down to the “historical” section to get a feel for the typical values. You can look at &lt;a href=&quot;https://www.iqair.com/world-most-polluted-cities&quot;&gt;this page&lt;/a&gt; to see annual average data for different cities across the world. If I were going to Mexico City or another place with sometimes-bad-air, I would take an N95 mask just in case.&lt;/p&gt;

&lt;h3 id=&quot;language&quot;&gt;Language&lt;/h3&gt;

&lt;p&gt;I don’t have personal experience with this issue because I speak Spanish pretty well. My guess is that life as as an English speaker is a bit easier than in e.g., Thailand, but harder than in e.g., Switzerland. Everything is written in a Latin script, which makes it easy to read and type in to your phone. There are English-speaking guides available for hire outside many tourist attractions.&lt;/p&gt;

&lt;p&gt;Google Translate works quite well between English and Spanish, and it can translate text from photos you take with your phone.&lt;/p&gt;

&lt;h2 id=&quot;where-to-go&quot;&gt;Where to go&lt;/h2&gt;

&lt;p&gt;These are not the only places worth going to. These are some of the places that I have visited myself. For each place I note a few highlights to get you excited and get you started on your trip planning.&lt;/p&gt;

&lt;h3 id=&quot;yucatán-state-w&quot;&gt;Yucatán state (&lt;a href=&quot;https://en.wikipedia.org/wiki/Yucat%C3%A1n&quot;&gt;W&lt;/a&gt;)&lt;/h3&gt;

&lt;p&gt;Balance of culture and nature. Pre-columbian ruins (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Chichen_Itza&quot;&gt;Chichén Itzá&lt;/a&gt;), beautiful &lt;a href=&quot;https://en.wikipedia.org/wiki/Cenote&quot;&gt;cenotes&lt;/a&gt; (pools in limestone caves where you can swim), excellent birding (e.g., in &lt;a href=&quot;https://en.wikipedia.org/wiki/R%C3%ADa_Lagartos_Biosphere_Reserve&quot;&gt;Ría Lagartos&lt;/a&gt;), great food (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Marquesita&quot;&gt;marquesitas&lt;/a&gt;, &lt;a href=&quot;https://www.seriouseats.com/sikil-paak-from-yucatan&quot;&gt;sikil paak&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Panucho&quot;&gt;panuchos&lt;/a&gt;), and the safe, walkable and charming capital city, &lt;a href=&quot;https://en.wikipedia.org/wiki/M%C3%A9rida,_Yucat%C3%A1n&quot;&gt;Mérida&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/chichen-itza-800-9ed8e09f3.jpg&quot; alt=&quot;chichen itza in Yucatán state&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/chichen-itza-400-5b4b1cd65.webp 400w, /generated/2023-03-17-visiting-mexico/chichen-itza-600-5b4b1cd65.webp 600w, /generated/2023-03-17-visiting-mexico/chichen-itza-800-5b4b1cd65.webp 800w, /generated/2023-03-17-visiting-mexico/chichen-itza-1000-5b4b1cd65.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;i&gt;Chichén Itzá. Not my favorite Mayan ruin, but perhaps the most photogenic. Credit &lt;a href=&quot;https://www.instagram.com/p/CoaimXmprgu/&quot;&gt;visitmeridamx&lt;/a&gt;&lt;/i&gt;&lt;/div&gt;

&lt;h3 id=&quot;baja-california-sur-w&quot;&gt;Baja California Sur (&lt;a href=&quot;https://en.wikipedia.org/wiki/Baja_California_Sur&quot;&gt;W&lt;/a&gt;)&lt;/h3&gt;

&lt;p&gt;Low on culture, high on nature. Release newly hatched sea turtles (e.g., in &lt;a href=&quot;https://en.wikipedia.org/wiki/Todos_Santos,_Baja_California_Sur&quot;&gt;Todos Santos&lt;/a&gt;), get really close to mother and child whales (in the &lt;a href=&quot;https://en.wikipedia.org/wiki/San_Ignacio_Lagoon&quot;&gt;San Ignacio Lagoon&lt;/a&gt;), kayak and swim with seals and dolphins (e.g., near &lt;a href=&quot;https://en.wikipedia.org/wiki/Loreto,_Baja_California_Sur&quot;&gt;Loreto&lt;/a&gt;), hike in the desert to find prehistoric petroglyphs, snorkel, SCUBA dive, or surf. If you want to stay at a fancy resort, there are lots of those in &lt;a href=&quot;https://en.wikipedia.org/wiki/Los_Cabos_Municipality&quot;&gt;Los Cabos&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/baja-dolphins-800-7a49d1334.jpg&quot; alt=&quot;dolphins in Loreto Bay, Baja California Sur&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/baja-dolphins-400-fcb73b2f7.webp 400w, /generated/2023-03-17-visiting-mexico/baja-dolphins-600-fcb73b2f7.webp 600w, /generated/2023-03-17-visiting-mexico/baja-dolphins-800-fcb73b2f7.webp 800w, /generated/2023-03-17-visiting-mexico/baja-dolphins-948-fcb73b2f7.webp 948w&quot; /&gt;&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;i&gt;Dolphins in Loreto Bay. I took this one.&lt;/i&gt;&lt;/div&gt;

&lt;h3 id=&quot;mexico-city-w&quot;&gt;Mexico City (&lt;a href=&quot;https://en.wikipedia.org/wiki/Mexico_City&quot;&gt;W&lt;/a&gt;)&lt;/h3&gt;

&lt;p&gt;High on culture, low on nature. Pre-columbian ruins (both in the middle of the city e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Templo_Mayor&quot;&gt;Templo Mayor&lt;/a&gt; and just outside in &lt;a href=&quot;https://en.wikipedia.org/wiki/Teotihuacan&quot;&gt;Teotihuacán&lt;/a&gt;), amazing architecture (e.g., the &lt;a href=&quot;https://en.wikipedia.org/wiki/Palacio_de_Correos_de_M%C3%A9xico&quot;&gt;Postal Palace&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Ciudad_Universitaria,_Mexico_City&quot;&gt;University City&lt;/a&gt;), great museums (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/National_Museum_of_Anthropology_(Mexico)&quot;&gt;National Museum of Anthropology&lt;/a&gt;, &lt;a href=&quot;https://www.yelp.com/biz/palacio-de-cultura-banamex-m%C3%A9xico&quot;&gt;Palacio de Cultura Banamex&lt;/a&gt;), religious pilgrimage sites (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Basilica_of_Our_Lady_of_Guadalupe&quot;&gt;Basilica of Our Lady of Guadalupe&lt;/a&gt;), fancy restaurants (e.g., &lt;a href=&quot;http://www.contramar.com.mx/&quot;&gt;Contramar&lt;/a&gt;), food from every region of Mexico, and excellent Lebanese food (e.g., &lt;a href=&quot;https://www.opentable.com/r/al-andalus-san-angel-ciudad-de-mexico&quot;&gt;Al Andalus&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/mexico-city-post-office-800-6700e24fc.jpg&quot; alt=&quot;postal palace in Mexico City. Credit fourbroadsabroad.com&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/mexico-city-post-office-400-0c4482bd3.webp 400w, /generated/2023-03-17-visiting-mexico/mexico-city-post-office-600-0c4482bd3.webp 600w, /generated/2023-03-17-visiting-mexico/mexico-city-post-office-800-0c4482bd3.webp 800w, /generated/2023-03-17-visiting-mexico/mexico-city-post-office-1000-0c4482bd3.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;i&gt;Postal Palace in Mexico City. If my local post office looked like this I wouldn&apos;t even mind the customer service. Credit &lt;a href=&quot;https://www.fourbroadsabroad.com/mexico&quot;&gt;Four Broads Abroad&lt;/a&gt;.&lt;/i&gt;&lt;/div&gt;

&lt;h3 id=&quot;oaxaca-state-w&quot;&gt;Oaxaca state (&lt;a href=&quot;https://en.wikipedia.org/wiki/Oaxaca&quot;&gt;W&lt;/a&gt;)&lt;/h3&gt;

&lt;p&gt;High on culture, medium on nature. The best food in Mexico (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Oaxacan_cuisine#Seven_moles&quot;&gt;mole&lt;/a&gt;), pre-columbian ruins (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Mitla&quot;&gt;Mitla&lt;/a&gt;), a vibrant economy of artisan goods such as ceramics (e.g., the people in &lt;a href=&quot;https://en.wikipedia.org/wiki/San_Bartolo_Coyotepec&quot;&gt;San Bartolo Coyotepec&lt;/a&gt; who have been making pottery for 2000 years), relaxing beach towns (e.g., &lt;a href=&quot;https://en.wikipedia.org/wiki/Puerto_Escondido,_Oaxaca&quot;&gt;Puerto Escondido&lt;/a&gt;), excellent bird-watching (e.g., at the &lt;a href=&quot;https://en.wikipedia.org/wiki/Laguna_de_Manialtepec&quot;&gt;Laguna de Manialtepec&lt;/a&gt;), a walkable and beautiful capital city (&lt;a href=&quot;https://en.wikipedia.org/wiki/Oaxaca_City&quot;&gt;Oaxaca City&lt;/a&gt;) with loads of free museums (e.g., the &lt;a href=&quot;https://www.google.com/maps/search/?api=1&amp;amp;query=Museo%20Textil%20at%20Hidalgo%20917%2C%20Centro%20Hist%C3%B3rico%2C%20Oaxaca%20de%20Ju%C3%A1rez%2C%20M%C3%A9xico%2C%20C.P.%2068000&quot;&gt;Textile Museum&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/azompa-oaxaca-pottery-800-11341416c.jpg&quot; alt=&quot;a woman making pottery in Azompa, Oaxaca&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/azompa-oaxaca-pottery-400-52d2e1291.webp 400w, /generated/2023-03-17-visiting-mexico/azompa-oaxaca-pottery-600-52d2e1291.webp 600w, /generated/2023-03-17-visiting-mexico/azompa-oaxaca-pottery-800-52d2e1291.webp 800w, /generated/2023-03-17-visiting-mexico/azompa-oaxaca-pottery-1000-52d2e1291.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;i&gt;A woman making pottery in Azompa, Oaxaca. My wife took this when we visited the workshop.&lt;/i&gt;&lt;/div&gt;

&lt;h2 id=&quot;general-tips&quot;&gt;General tips&lt;/h2&gt;

&lt;h3 id=&quot;visit-big-cities-during-christmas-or-easter&quot;&gt;Visit big cities during Christmas or Easter&lt;/h3&gt;

&lt;p&gt;Consider visiting big cities during the winter (Christmas - New Year) or spring (Holy Week) holidays, when air pollution (and traffic) tend to be much lighter because many fewer people are driving to work. However these are not the best times to visit beaches and other tourist destinations, because they’ll be full of domestic tourists from the cities.&lt;/p&gt;

&lt;h3 id=&quot;seek-out-something-very-local&quot;&gt;Seek out something very local&lt;/h3&gt;

&lt;p&gt;I have had fun by seeking out very specific local experiences. Some that I’ve enjoyed that you might too: spot a type of bird you find beautiful, visit a studio that makes some handicraft you like and talk to the artisans, drink a hard-to-find local drink, try all the tortillerias within walking distance of your hotel.&lt;/p&gt;

&lt;h3 id=&quot;use-the-internet&quot;&gt;Use the internet&lt;/h3&gt;

&lt;p&gt;You can buy a cheap SIM in the airport, or get an &lt;a href=&quot;https://esimdb.com/mexico&quot;&gt;eSIM&lt;/a&gt; before leaving home. 3G coverage is pretty widespread (though not ubiquitous in very rural areas away from major roads) and 4G is very good in all cities and major highways (&lt;a href=&quot;https://www.telcel.com/mundo_telcel/quienes-somos/corporativo/mapas-cobertura&quot;&gt;here’s the coverage map&lt;/a&gt; for Telcel, one of the carriers with the widest coverage)).&lt;/p&gt;

&lt;p&gt;Fixed-line internet is fast and widely available in cities.&lt;/p&gt;

&lt;p&gt;WhatsApp is ubiquitous. To message somebody via WhatsApp without adding them to your contacts first, open &lt;a href=&quot;https://wa.me/&quot;&gt;https://wa.me/&lt;/a&gt;&amp;lt;phone number with country code no plus&amp;gt;.&lt;/p&gt;

&lt;p&gt;Google Maps has accurate locations and many reviews by locals for almost all attractions. Pro tip: When reading a restaurant review that’s been translated from Spanish to English, be aware that Google consistently mistranslates the word “rico” to “rich”, rather than the correct “delicious”.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/google-maps-translation-744-166db6e61.png&quot; alt=&quot;google maps bad translation&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/google-maps-translation-400-f7567ed96.webp 400w, /generated/2023-03-17-visiting-mexico/google-maps-translation-600-f7567ed96.webp 600w, /generated/2023-03-17-visiting-mexico/google-maps-translation-744-f7567ed96.webp 744w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Uber is cheap and works very well in the cities where it’s available. Uber Eats delivers from restaurants and grocers.&lt;/p&gt;

&lt;h1 id=&quot;see-also&quot;&gt;See also&lt;/h1&gt;

&lt;p&gt;I often use the Lonely Planet guides as a starting point to plan a trip. I use it to narrow down potential areas to visit, and then I switch to researching online for detailed planning.&lt;/p&gt;

&lt;p&gt;To learn about the history of civilization in Mexico and how it fits into the world, I highly recommend Charles Mann’s books “&lt;a href=&quot;https://en.wikipedia.org/wiki/1491:_New_Revelations_of_the_Americas_Before_Columbus&quot;&gt;1491&lt;/a&gt;” and “&lt;a href=&quot;https://en.wikipedia.org/wiki/1493:_Uncovering_the_New_World_Columbus_Created&quot;&gt;1493&lt;/a&gt;”. Neither is exclusively about Mexico, but both feature it heavily, and you can use the index to skip to the Mexico-specific parts if you want.&lt;/p&gt;

&lt;h2 id=&quot;appendices&quot;&gt;Appendices&lt;/h2&gt;

&lt;h3 id=&quot;road-accidents-data&quot;&gt;Road accidents data&lt;/h3&gt;

&lt;p&gt;Some data from &lt;a href=&quot;https://ourworldindata.org/grapher/death-rates-road-incidents?tab=chart&amp;amp;country=USA~MEX~FRA&quot;&gt;Our World in Data&lt;/a&gt; for 2019:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Death rate from road injuries / 100k population&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;France: 5.8&lt;/li&gt;
  &lt;li&gt;USA: 11.1&lt;/li&gt;
  &lt;li&gt;Mexico: 16.8&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;state-department-recommendations&quot;&gt;State department recommendations&lt;/h3&gt;

&lt;p&gt;If you want to trust the USA State Department instead of the official homicide data, they provide recommendations for each state in Mexico
(But trusting a government agency’s recommendations is no way to live life. &lt;a href=&quot;https://viewfromthewing.com/the-state-department-has-issued-its-highest-level-travel-warning-against-antarctica/&quot;&gt;Remember when the CDC said not to visit Antarctica because of COVID danger&lt;/a&gt;?).&lt;/p&gt;

&lt;p&gt;Here are the recommendations in map form:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/state-department-map-800-ca027cb7d.png&quot; alt=&quot;USA state department travel recommendations map&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/state-department-map-400-7d2e16324.webp 400w, /generated/2023-03-17-visiting-mexico/state-department-map-600-7d2e16324.webp 600w, /generated/2023-03-17-visiting-mexico/state-department-map-800-7d2e16324.webp 800w, /generated/2023-03-17-visiting-mexico/state-department-map-1000-7d2e16324.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travelmaps.state.gov/TSGMap/?extent=-124.207939566,14.44327709,-84.313397286,33.446969624&quot;&gt;Source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For comparison, Yucatan and Campeche (the light tan / unshaded ones on the bottom right) have the same rating as Switzerland, and yellow is the rating given to France and Germany.&lt;/p&gt;

&lt;p&gt;We can see these correlate somewhat with the homicide data but not as well as I’d imagine. Probably some of this is the State Department being slow to update their recommendations, and some of it is that they take things other than homicide into account.&lt;/p&gt;

&lt;h3 id=&quot;crime-data&quot;&gt;Crime data&lt;/h3&gt;

&lt;p&gt;All Homicide rates are per 100k population. Mexico data is 2022 data from &lt;a href=&quot;https://elcri.men/en/violence-map/&quot;&gt;El Crimen&lt;/a&gt; (Note: I spent a few minutes trying to get the official data for previous years from &lt;a href=&quot;https://datos.gob.mx/&quot;&gt;datos.gob.mx&lt;/a&gt; but I was unable to find it. If you can find it please let me know how). USA homicide numbers are &lt;a href=&quot;https://cde.ucr.cjis.gov/LATEST/webapp/#/pages/explorer/crime/crime-trend&quot;&gt;from the FBI&lt;/a&gt;. Where the FBI provided counts rather than rates, I divided by population numbers from the 2020 &lt;a href=&quot;https://www.census.gov/quickfacts&quot;&gt;US Census&lt;/a&gt;. For the USA I included both 2019 and 2020 because there was &lt;a href=&quot;https://astralcodexten.substack.com/p/what-caused-the-2020-homicide-spike&quot;&gt;a spike in homicides in 2020&lt;/a&gt; in the USA, so it’s hard to know which year is a more useful comparison. I threw in Paris for fun (I’m not sure if I interpreted the data correctly. I downloaded it from &lt;a href=&quot;https://www.data.gouv.fr/fr/datasets/crimes-et-delits-enregistres-par-les-services-de-gendarmerie-et-de-police-depuis-2012/#_&quot;&gt;here&lt;/a&gt; and summed rows 5-8, columns RD-RS).&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2019-800-59b8f8aac.png&quot; alt=&quot;homicide rates in different cities (2019)&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2019-400-76b987f1d.webp 400w, /generated/2023-03-17-visiting-mexico/city-homicides-2019-600-76b987f1d.webp 600w, /generated/2023-03-17-visiting-mexico/city-homicides-2019-800-76b987f1d.webp 800w, /generated/2023-03-17-visiting-mexico/city-homicides-2019-1000-76b987f1d.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2020-800-7d1c3075c.png&quot; alt=&quot;homicide rates in different cities (2020)&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/city-homicides-2020-400-a8f5ab7b7.webp 400w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-600-a8f5ab7b7.webp 600w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-800-a8f5ab7b7.webp 800w, /generated/2023-03-17-visiting-mexico/city-homicides-2020-1000-a8f5ab7b7.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/state-homicides-2019-800-545bcdca9.png&quot; alt=&quot;homicide rates in different states (2019)&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/state-homicides-2019-400-8fc8617d7.webp 400w, /generated/2023-03-17-visiting-mexico/state-homicides-2019-600-8fc8617d7.webp 600w, /generated/2023-03-17-visiting-mexico/state-homicides-2019-800-8fc8617d7.webp 800w, /generated/2023-03-17-visiting-mexico/state-homicides-2019-1000-8fc8617d7.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2023-03-17-visiting-mexico/state-homicides-2020-800-b36994667.png&quot; alt=&quot;homicide rates in different states (2020)&quot; srcset=&quot;/generated/2023-03-17-visiting-mexico/state-homicides-2020-400-1dd048f53.webp 400w, /generated/2023-03-17-visiting-mexico/state-homicides-2020-600-1dd048f53.webp 600w, /generated/2023-03-17-visiting-mexico/state-homicides-2020-800-1dd048f53.webp 800w, /generated/2023-03-17-visiting-mexico/state-homicides-2020-1000-1dd048f53.webp 1000w&quot; /&gt;&lt;/p&gt;</content><author><name>garymm</name></author><category term="travel" /><category term="crime" /><summary type="html">Mexico is an amazing place to visit, but a lot of people I know have never been, or haven’t been in a long time, despite enjoying international travel. In this post I’ll explain why I think you should consider visiting and address some common reasons people don’t go, including safety. This is not a travel guide, but I’ll provide a few recommendations for where to go and a few tips for how to do it.</summary></entry><entry><title type="html">Seeing Coworkers In Person Again</title><link href="http://garymm.org/blog/2021/08/20/seeing-coworkers-in-person-again/" rel="alternate" type="text/html" title="Seeing Coworkers In Person Again" /><published>2021-08-20T00:00:00-07:00</published><updated>2021-08-20T00:00:00-07:00</updated><id>http://garymm.org/blog/2021/08/20/seeing-coworkers-in-person-again</id><content type="html" xml:base="http://garymm.org/blog/2021/08/20/seeing-coworkers-in-person-again/">&lt;p&gt;In March I started a new job at Microsoft and in May I started managing a team.
I have been pleasantly surprised at how happy and productive I have been
working entirely remotely for the past ~17 months, but I was eager to meet people
in person. I live in the SF Bay Area, but my manager and almost all of the people
I manage are in the Seattle area, so a few weeks ago I travelled to meet them.&lt;/p&gt;

&lt;p&gt;I worked from my team’s office area for a few days. Despite it being almost
completely empty, I did bump into one of my team members and we
went out to lunch together and had a great time. Besides that serendipitous encounter,
I arranged a meeting with my manager in a park, a meeting with a peer in a different park,
and a cruise on lakes Union and Washington for my team.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;wrap&quot; src=&quot;/generated/2021-08-20-seeing-coworkers-in-person-again-cruise-800-5a194ba1a.jpeg&quot; alt=&quot;cruising with my team&quot; srcset=&quot;/generated/2021-08-20-seeing-coworkers-in-person-again-cruise-400-65a7d6658.webp 400w, /generated/2021-08-20-seeing-coworkers-in-person-again-cruise-600-65a7d6658.webp 600w, /generated/2021-08-20-seeing-coworkers-in-person-again-cruise-800-65a7d6658.webp 800w, /generated/2021-08-20-seeing-coworkers-in-person-again-cruise-1000-65a7d6658.webp 1000w&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It seems likely to me that even after COVID-19 is a distant memory, a lot of
work will be done by geographically distributed teams. I believe wise companies
will take some of the money they save on office real estate and spend it instead
on paying for team members to regularly get together in person. In my
experience, in-person gatherings catalyze emotional bonds that can persist for a
long time and help make remote interactions more pleasant and productive. I
first noticed this years ago back when I still worked in an office every day,
but I was working closely with people who sat in an office in a different
continent. During my first business trip to visit them I felt very guilty for
wasting the company’s money. In terms of concrete business goals, I didn’t do
much on that trip to justify the travel bill. But over time I found that it was
easier for me to think of those coworkers as real people who I cared about
because we had hung out together and gotten to know each other, and that helped
me work with them for years afterwards.&lt;/p&gt;

&lt;p&gt;By the way, if you’d like to join my team and meet me in person once in a while,
I’m hiring! &lt;a href=&quot;https://careers.microsoft.com/us/en/job/1036775/SENIOR-SOFTWARE-ENGINEER&quot;&gt;Apply
here&lt;/a&gt;
or send me an email or LinkedIn message. The job listing says the job is only
available in specific locations, but if those don’t work for you, I can be
flexible for the right candidate.&lt;/p&gt;</content><author><name>garymm</name></author><category term="work" /><summary type="html">In March I started a new job at Microsoft and in May I started managing a team. I have been pleasantly surprised at how happy and productive I have been working entirely remotely for the past ~17 months, but I was eager to meet people in person. I live in the SF Bay Area, but my manager and almost all of the people I manage are in the Seattle area, so a few weeks ago I travelled to meet them.</summary></entry><entry><title type="html">Machine Learning Diary 001: Swift detour, and Recreating FastAI’s Collaborative Filtering</title><link href="http://garymm.org/blog/2020/10/02/machine-learning-diary-001-swift-detour/" rel="alternate" type="text/html" title="Machine Learning Diary 001: Swift detour, and Recreating FastAI’s Collaborative Filtering" /><published>2020-10-02T14:04:00-07:00</published><updated>2020-10-02T14:04:00-07:00</updated><id>http://garymm.org/blog/2020/10/02/machine-learning-diary-001-swift-detour</id><content type="html" xml:base="http://garymm.org/blog/2020/10/02/machine-learning-diary-001-swift-detour/">&lt;p&gt;I&apos;ve been spending quite a bit of my free time studying machine learning over the past 3 months. After spending quite
  a bit of time deciding what learning materials to start with, I decided on fast.ai&apos;s Practical Deep Learning for
  Coders (I saw the&amp;nbsp;&lt;a href=&quot;https://course19.fast.ai/&quot;&gt;2019 version&lt;/a&gt;). Overall I highly recommend the course,
  and I&apos;m planning to go back and do the 2020 version of it.&lt;/p&gt;
&lt;p&gt;One reason I was excited about fast.ai&apos;s course is that they had some content on &lt;a
    href=&quot;https://www.tensorflow.org/swift&quot;&gt;Swift for TensorFlow&lt;/a&gt;&amp;nbsp;(S4TF). I have written a lot of Python and
  while it has its place, I was excited to try something new and hopefully better. I watched the two fast.ai videos on
  S4TF and then decided to try it out. This ended up being a fairly costly mistake for me. Basically S4TF is just not
  nearly as mature as PyTorch, and I wasted a bunch of time struggling with environment setup (no equivalent
  to&amp;nbsp;&lt;span style=&quot;font-family: courier;&quot;&gt;conda install&lt;/span&gt;), bugs, very incomplete documentation, and cryptic
  error messages. At this point (I tried in 2020-09), I suggest you steer clear of S4TF if your primary goal is just to
  learn ML. Though it was fun to learn some Swift and I&apos;d definitely consider using Swift in future projects, ML or
  otherwise.&lt;/p&gt;
&lt;p&gt;With that multi-week detour out of the way, I decided to focus on PyTorch. For my first task I decided to try to
  recreate the simplest model presented in the fast.ai course, but without using the fastai library at all, just pure
  PyTorch. I found that almost all of the special stuff in fastai is included in PyTorch as of 1.6, so this was a lot
  easier than I expected. Here&apos;s my final &lt;a
    href=&quot;https://github.com/garymm/mlnbs/blob/master/collaborative-filtering.ipynb&quot;&gt;notebook for this collaborative
    filtering task&lt;/a&gt;. Some of the issues I ran into and how I resolved them:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul style=&quot;text-align: left;&quot;&gt;
  &lt;li&gt;For this task, using the GPU was much slower than just using the CPU. I suppose this is because the model is so
    simple that the overhead of copying data to/from the GPU dominates any speedup in actual calculations. In retrospect
    this was also probably why training my Swift version of the model was so slow, and &lt;a
      href=&quot;https://github.com/tensorflow/swift/issues/524#issuecomment-680919423&quot;&gt;S4TF doesn&apos;t allow eager tensors to
      use the CPU&lt;/a&gt;&amp;nbsp;if a GPU is present, so this would have been much harder to discover and work around in
    Swift.&lt;/li&gt;
  &lt;li&gt;Fastai wraps the &lt;span style=&quot;font-family: courier;&quot;&gt;torch.nn.Embedding&lt;/span&gt; type with a function that changes
    the initial values. PyTorch initializes using random values drawn from a normal distribution with&amp;nbsp;𝜎^2 = 1.
    Fastai changes this to a normal distribution with&amp;nbsp;𝜎^2 = .01, truncated so no value is farther than 2 standard
    deviations from the mean. They reference &lt;a href=&quot;https://arxiv.org/abs/1711.09160&quot;&gt;An Exploration of Word Embedding
      Initialization in Deep-Learning Tasks&lt;/a&gt;&amp;nbsp;as justification. I found this provided a small boost in
    performance.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;I forgot calls to &lt;span style=&quot;font-family: courier;&quot;&gt;squeeze()&lt;/span&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt; in a
      few places. I was quite surprised that &lt;/span&gt;&lt;span style=&quot;font-family: courier;&quot;&gt;torch.nn.MSELoss&lt;/span&gt;&lt;span
      style=&quot;font-family: inherit;&quot;&gt;&amp;nbsp;didn&apos;t throw an error when I provided it two tensors of different shapes.
      Instead it did some averaging over all the values, which led to poor training performance.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>garymm</name></author><category term="machine learning" /><category term="programming" /><summary type="html">I&apos;ve been spending quite a bit of my free time studying machine learning over the past 3 months. After spending quite a bit of time deciding what learning materials to start with, I decided on fast.ai&apos;s Practical Deep Learning for Coders (I saw the&amp;nbsp;2019 version). Overall I highly recommend the course, and I&apos;m planning to go back and do the 2020 version of it. One reason I was excited about fast.ai&apos;s course is that they had some content on Swift for TensorFlow&amp;nbsp;(S4TF). I have written a lot of Python and while it has its place, I was excited to try something new and hopefully better. I watched the two fast.ai videos on S4TF and then decided to try it out. This ended up being a fairly costly mistake for me. Basically S4TF is just not nearly as mature as PyTorch, and I wasted a bunch of time struggling with environment setup (no equivalent to&amp;nbsp;conda install), bugs, very incomplete documentation, and cryptic error messages. At this point (I tried in 2020-09), I suggest you steer clear of S4TF if your primary goal is just to learn ML. Though it was fun to learn some Swift and I&apos;d definitely consider using Swift in future projects, ML or otherwise. With that multi-week detour out of the way, I decided to focus on PyTorch. For my first task I decided to try to recreate the simplest model presented in the fast.ai course, but without using the fastai library at all, just pure PyTorch. I found that almost all of the special stuff in fastai is included in PyTorch as of 1.6, so this was a lot easier than I expected. Here&apos;s my final notebook for this collaborative filtering task. Some of the issues I ran into and how I resolved them: For this task, using the GPU was much slower than just using the CPU. I suppose this is because the model is so simple that the overhead of copying data to/from the GPU dominates any speedup in actual calculations. In retrospect this was also probably why training my Swift version of the model was so slow, and S4TF doesn&apos;t allow eager tensors to use the CPU&amp;nbsp;if a GPU is present, so this would have been much harder to discover and work around in Swift. Fastai wraps the torch.nn.Embedding type with a function that changes the initial values. PyTorch initializes using random values drawn from a normal distribution with&amp;nbsp;𝜎^2 = 1. Fastai changes this to a normal distribution with&amp;nbsp;𝜎^2 = .01, truncated so no value is farther than 2 standard deviations from the mean. They reference An Exploration of Word Embedding Initialization in Deep-Learning Tasks&amp;nbsp;as justification. I found this provided a small boost in performance. I forgot calls to squeeze() in a few places. I was quite surprised that torch.nn.MSELoss&amp;nbsp;didn&apos;t throw an error when I provided it two tensors of different shapes. Instead it did some averaging over all the values, which led to poor training performance.</summary></entry><entry><title type="html">Grading on a curve and The Case Against Education</title><link href="http://garymm.org/blog/2018/06/03/grading-on-curve-and-case-against/" rel="alternate" type="text/html" title="Grading on a curve and The Case Against Education" /><published>2018-06-03T08:05:00-07:00</published><updated>2018-06-03T08:05:00-07:00</updated><id>http://garymm.org/blog/2018/06/03/grading-on-curve-and-case-against</id><content type="html" xml:base="http://garymm.org/blog/2018/06/03/grading-on-curve-and-case-against/">&lt;span style=&quot;font-family: inherit;&quot;&gt;&lt;span face=&quot;arial, sans-serif&quot; style=&quot;color: #222222;&quot;&gt;I recently read &lt;a
                        href=&quot;https://books.google.com/books?isbn=1400889324&quot;&gt;The Case Against Education&lt;/a&gt;, which
                argues that
                education pays off for individuals mostly because it sends signals about intelligence and
                conscientiousness,
                &lt;i&gt;not&lt;/i&gt;&amp;nbsp;because it equips students with useful skills.&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span
                face=&quot;arial, sans-serif&quot; style=&quot;color: #222222;&quot;&gt;Here&apos;s a puzzle which was not addressed in the book,
                but may be solved by that
                model.&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;My university courses were mostly graded on curves. I
                think Advanced Placement exams are also graded on curves, but I&apos;m less sure of this. At the time this
                didn&apos;t
                make sense to me. If the point of taking the courses was to gain skills, shouldn&apos;t there be an objective
                scale
                of how much skill a student gained? And shouldn&apos;t students be graded against this objective scale,
                rather than
                on how they place in the distribution of students who happen to take the exam on the same day as them?
                Objective
                grading seems especially feasible for technical courses like math, but I could imagine it being
                plausible for
                humanities courses like history as well.&lt;/span&gt;&lt;/div&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;But if the point of a school transcript is not so much
                to say &quot;Look at all these skills I acquired!&quot;, but rather to say &quot;Here&apos;s where I am in the distribution
                of
                students who got this degree at this university&quot;, then the mystery is dissolved. The latter is obviously
                more in
                accordance with the signaling model.&lt;/span&gt;&lt;/div&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div style=&quot;color: #222222;&quot;&gt;&lt;span style=&quot;font-family: inherit;&quot;&gt;Of course there are other reasonable explanations for
                grading on a curve, even in technical courses. If imposed by the department or university, it can be
                used as a
                defense against grade inflation. I believe it had that effect at my undergraduate university, where some
                departments had distributions that all professors were supposed to adhere to, and those departments had
                generally lower grades. But again, wanting to maintain the same grade distribution over many years is
                inconsistent with that grade being an objective measure of skill gained, unless we assume zero change in
                pedagogical methods, how much knowledge students have coming in, or just random variation in class
                achievement.&lt;/span&gt;&lt;/div&gt;</content><author><name>garymm</name></author><category term="education" /><summary type="html">I recently read The Case Against Education, which argues that education pays off for individuals mostly because it sends signals about intelligence and conscientiousness, not&amp;nbsp;because it equips students with useful skills.&amp;nbsp;&amp;nbsp;Here&apos;s a puzzle which was not addressed in the book, but may be solved by that model. My university courses were mostly graded on curves. I think Advanced Placement exams are also graded on curves, but I&apos;m less sure of this. At the time this didn&apos;t make sense to me. If the point of taking the courses was to gain skills, shouldn&apos;t there be an objective scale of how much skill a student gained? And shouldn&apos;t students be graded against this objective scale, rather than on how they place in the distribution of students who happen to take the exam on the same day as them? Objective grading seems especially feasible for technical courses like math, but I could imagine it being plausible for humanities courses like history as well. But if the point of a school transcript is not so much to say &quot;Look at all these skills I acquired!&quot;, but rather to say &quot;Here&apos;s where I am in the distribution of students who got this degree at this university&quot;, then the mystery is dissolved. The latter is obviously more in accordance with the signaling model. Of course there are other reasonable explanations for grading on a curve, even in technical courses. If imposed by the department or university, it can be used as a defense against grade inflation. I believe it had that effect at my undergraduate university, where some departments had distributions that all professors were supposed to adhere to, and those departments had generally lower grades. But again, wanting to maintain the same grade distribution over many years is inconsistent with that grade being an objective measure of skill gained, unless we assume zero change in pedagogical methods, how much knowledge students have coming in, or just random variation in class achievement.</summary></entry><entry><title type="html">4K, HDR, and MVC 3D in plex for Kodi on Windows</title><link href="http://garymm.org/blog/2017/12/31/4k-hdr-and-mvc-3d-in-plex-for-kodi-on/" rel="alternate" type="text/html" title="4K, HDR, and MVC 3D in plex for Kodi on Windows" /><published>2017-12-31T09:31:00-08:00</published><updated>2017-12-31T09:31:00-08:00</updated><id>http://garymm.org/blog/2017/12/31/4k-hdr-and-mvc-3d-in-plex-for-kodi-on</id><content type="html" xml:base="http://garymm.org/blog/2017/12/31/4k-hdr-and-mvc-3d-in-plex-for-kodi-on/">This took me forever to set up properly, so I figured I&apos;d share it.&lt;br /&gt;For now just the basic outline. If have
questions on a detail ask and I can answer.&lt;br /&gt;First my set-up:&lt;br /&gt;&lt;br /&gt;
&lt;ul&gt;
    &lt;li&gt;Windows 10 64 bit with Fall Creators Update&lt;/li&gt;
    &lt;li&gt;GeForce GTX 960&lt;/li&gt;
    &lt;li&gt;2016 LG OLED TV&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;&lt;br /&gt;The basic ingredients are these. Note I always used 64 bit versions of everything.&lt;br /&gt;&lt;br /&gt;
&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;https://forum.kodi.tv/showthread.php?tid=223175&quot;&gt;Kodi DSPlayer&lt;/a&gt;, I used 17.6, 64 bit&lt;/li&gt;
    &lt;li&gt;Plex for Kodi add-on, I used 0.1.3. Install it from within Kodi.&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://github.com/Nevcairiel/LAVFilters/releases&quot;&gt;LAV Filters&lt;/a&gt;, I used 0.70.2&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;http://madvr.com/&quot;&gt;MadVR&lt;/a&gt;, I used v0.92.10&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;&lt;br /&gt;Basic steps:&lt;br /&gt;&lt;br /&gt;
&lt;ol&gt;
    &lt;li&gt;Install everything listed above.&lt;/li&gt;
    &lt;li&gt;Replace Kodi DSPlayer&apos;s internal filters with the external ones: copy all the files files from &lt;span
            style=&quot;font-family: Courier New, Courier, monospace;&quot;&gt;C:\Program Files (x86)\LAV Filters\x64&lt;/span&gt; to &lt;span
            style=&quot;font-family: Courier New, Courier, monospace;&quot;&gt;C:\Program
            Files\Kodi\system\players\dsplayer\LAVFilters&lt;/span&gt;, replacing files at the destination.&lt;/li&gt;
    &lt;li&gt;In the nVidia control panel, disable stereoscopic 3D. With the current drivers, enabling it causes crashes in
        madVR when Direct3D 11 is enabled and it goes full screen.&lt;/li&gt;
    &lt;li&gt;I have HDR and Advanced Color disabled in the Windows 10 display settings. MadVR enables it during playback as
        needed, and it makes the desktop look bad when it&apos;s on.&lt;/li&gt;
    &lt;li&gt;In Plex for Kodi Settings, enable HEVC streaming.&lt;/li&gt;
    &lt;li&gt;On the LG OLED TV settings, disable Screen Shift. This setting shifts the image around by 1 pixel every few
        minutes, which will result in the line-interlaced image output by madVR not being aligned with the FPR (3D
        filter), which results in the left and right eyes being swapped. Note this will increase the risk of image
        retention.&lt;/li&gt;
    &lt;li&gt;MadVR settings (just the required stuff, other settings you should probably mess with, lots of other guides on
        that):&lt;/li&gt;
&lt;/ol&gt;&lt;br /&gt;&lt;br /&gt;
&lt;ul&gt;
    &lt;ul&gt;
        &lt;li&gt;rendering -&amp;gt; general settings: Use Direct3D 11 for presentation (required for 10-bit color output)&lt;/li&gt;
        &lt;li&gt;rendering -&amp;gt; stereo 3D: enable stereo 3D playback. Leave everything else unchecked.&lt;/li&gt;
        &lt;li&gt;Devices -&amp;gt; &lt;your avr=&quot;&quot; or=&quot;&quot; tv=&quot;&quot;&gt; -&amp;gt; properties: the native display bitdepth is 10 bit or higher
                (required for 10-bit color output).&lt;/your&gt;
        &lt;/li&gt;
        &lt;li&gt;Devices -&amp;gt; &lt;your avr=&quot;&quot; or=&quot;&quot; tv=&quot;&quot;&gt; -&amp;gt; properties: 3D format is Line Alternative (this works for
                passive displays like LG OLEDs, *not* for any other kind of display)&lt;/your&gt;
        &lt;/li&gt;
        &lt;li&gt;Devices -&amp;gt; &lt;your avr=&quot;&quot; or=&quot;&quot; tv=&quot;&quot;&gt; -&amp;gt; hdr: passthrough HDR content to the display, and send HDR
                metadata to the display&lt;/your&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/ul&gt;&lt;br /&gt;&lt;br /&gt;
&lt;blockquote style=&quot;border: none; margin: 0 0 0 40px; padding: 0px;&quot;&gt;&lt;br /&gt;&lt;/blockquote&gt;&lt;br /&gt;Hope this is helpful to
someone else.</content><author><name>garymm</name></author><summary type="html">This took me forever to set up properly, so I figured I&apos;d share it.For now just the basic outline. If have questions on a detail ask and I can answer.First my set-up: Windows 10 64 bit with Fall Creators Update GeForce GTX 960 2016 LG OLED TV The basic ingredients are these. Note I always used 64 bit versions of everything. Kodi DSPlayer, I used 17.6, 64 bit Plex for Kodi add-on, I used 0.1.3. Install it from within Kodi. LAV Filters, I used 0.70.2 MadVR, I used v0.92.10 Basic steps: Install everything listed above. Replace Kodi DSPlayer&apos;s internal filters with the external ones: copy all the files files from C:\Program Files (x86)\LAV Filters\x64 to C:\Program Files\Kodi\system\players\dsplayer\LAVFilters, replacing files at the destination. In the nVidia control panel, disable stereoscopic 3D. With the current drivers, enabling it causes crashes in madVR when Direct3D 11 is enabled and it goes full screen. I have HDR and Advanced Color disabled in the Windows 10 display settings. MadVR enables it during playback as needed, and it makes the desktop look bad when it&apos;s on. In Plex for Kodi Settings, enable HEVC streaming. On the LG OLED TV settings, disable Screen Shift. This setting shifts the image around by 1 pixel every few minutes, which will result in the line-interlaced image output by madVR not being aligned with the FPR (3D filter), which results in the left and right eyes being swapped. Note this will increase the risk of image retention. MadVR settings (just the required stuff, other settings you should probably mess with, lots of other guides on that): rendering -&amp;gt; general settings: Use Direct3D 11 for presentation (required for 10-bit color output) rendering -&amp;gt; stereo 3D: enable stereo 3D playback. Leave everything else unchecked. Devices -&amp;gt; -&amp;gt; properties: the native display bitdepth is 10 bit or higher (required for 10-bit color output). Devices -&amp;gt; -&amp;gt; properties: 3D format is Line Alternative (this works for passive displays like LG OLEDs, *not* for any other kind of display) Devices -&amp;gt; -&amp;gt; hdr: passthrough HDR content to the display, and send HDR metadata to the display Hope this is helpful to someone else.</summary></entry></feed>